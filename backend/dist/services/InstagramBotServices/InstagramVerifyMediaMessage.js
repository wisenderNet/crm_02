'use strict';
const G = b, H = b;
(function (c, d) {
    const E = b, F = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(E(0x101)) / (0x29 * 0xa6 + 0x1115 * 0x2 + -0x3cbf) * (-parseInt(E(0x116)) / (-0xdb1 * -0x1 + 0x2f * -0x26 + -0x6b5)) + parseInt(F(0x12a)) / (-0x921 + 0x125e + -0x93a) + -parseInt(E(0x13f)) / (0x256f + -0x238b + -0x1e0) + parseInt(F(0x12e)) / (-0x178a + 0x7b * 0x21 + 0x7b4) * (-parseInt(F(0xcb)) / (-0x234d + 0x2c8 + 0x208b)) + -parseInt(F(0xff)) / (0x127f + 0x5 * 0x182 + -0x1a02) + -parseInt(E(0x13c)) / (-0x1ba3 + 0x1 * -0x23a3 + -0x4a * -0xdb) + parseInt(F(0x110)) / (0x1 * -0x2303 + -0x157a + 0x3886);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x7e828 + -0x1 * 0x11de81 + 0x81457 * 0x3));
var __importDefault = this && this[G(0x129) + G(0x122)] || function (c) {
    const I = H;
    return c && c[I(0xfd)] ? c : { 'default': c };
};
const u = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x15e2 + 0x3 * -0x8f9 + 0x5c9 * 0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
u[G(0x135)] = !![], Object[H(0xea) + G(0xde)](exports, G(0xfd), u);
function a() {
    const X = [
        'hhvxb',
        'eNJgr',
        'XShDz',
        'stream',
        'nhHPZ',
        'text',
        'LrvDW',
        'media',
        'evGpn',
        'erty',
        'public',
        'data',
        'ERROR\x20DONW',
        'candidates',
        'KipAr',
        'vQFTK',
        'update',
        'imagem',
        'ions2',
        'DIdfi',
        'vídeo',
        'defineProp',
        'media_type',
        'finish',
        'received',
        'aazYW',
        'pYiYn',
        'arquivo',
        'MgKWz',
        'BgPWC',
        'messageDat',
        'caption',
        'mxEoC',
        'eStream',
        'video_vers',
        'LxCTB',
        'LWFIR',
        'NjHIh',
        'HMyTn',
        'FYWOI',
        '__esModule',
        'KhzOb',
        '6417642WWTskL',
        'khUSK',
        '32339tjkUiP',
        'YoioD',
        'fcekW',
        'lIooy',
        'ihxED',
        'item_type',
        'join',
        'jMmHA',
        'Ummsx',
        'geService',
        'áudio',
        'yEWpi',
        'VNZUz',
        'zsgXi',
        'rhyoN',
        '33805539xbuxWp',
        'vlWQQ',
        'tRGVd',
        'tenantId',
        'axios',
        'reateMessa',
        '56NBODHj',
        'MOTfB',
        'GET',
        'length',
        'KPqAe',
        'ULVjC',
        'Services/C',
        'GVImN',
        'split',
        '2|4|3|1|0',
        'ions',
        'Frywd',
        'fault',
        'VhvkO',
        'yjqJH',
        'IpgQS',
        'GSjwp',
        'ubAAa',
        '4|0|2|1|3',
        '__importDe',
        '3413910iRmweo',
        'LOAD',
        'error',
        'createWrit',
        '70gawoCH',
        'image',
        'item_id',
        'chbBG',
        'rzhMv',
        'audio',
        '1|0|3|4|2',
        'value',
        'audio_src',
        'voice_medi',
        'message',
        'DyRse',
        'pipe',
        'zSLWs',
        '1551088frlSVN',
        '3|4|0|1|2',
        'url',
        '4628908RWnPwK',
        'getTime',
        'twEgl',
        'OXwgL',
        'alquA',
        'mejOn',
        'image_vers',
        'zpshV',
        'applicatio',
        '../Message',
        'DDqsY',
        'JMwMW',
        'ehcKQ',
        'path',
        '336486YKIlDG',
        'xqGSX',
        'default',
        'sended',
        'xqnpK',
        '4|0|3|2|1',
        'video',
        'bAAJb',
        'toString',
        'NKyIq'
    ];
    a = function () {
        return X;
    };
    return a();
}
const path_1 = require(H(0xca)), fs_1 = require('fs'), axios_1 = __importDefault(require(H(0x114))), CreateMessageService_1 = __importDefault(require(G(0xc6) + H(0x11c) + G(0x115) + G(0x10a))), getExt = d => {
        const J = H, K = G, e = {};
        e[J(0x111)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[K(0x11e)]('?'), h = g[-0x2670 + -0x720 + 0x2d90][K(0x11e)]('/'), i = h[f[K(0x111)](h[K(0x119)], 0x1 * 0x12d1 + 0xd72 + 0x2 * -0x1021)][K(0x11e)]('.');
        return i[-0x1f0d + -0x25af + -0x44bd * -0x1];
    }, downloadFile = async (c, d) => {
        const L = H, M = G, e = {
                'ehcKQ': L(0x134),
                'YoioD': L(0xe9),
                'MOTfB': function (g, h) {
                    return g(h);
                },
                'KhzOb': L(0xd1),
                'FYWOI': function (g, h) {
                    return g !== h;
                },
                'IpgQS': L(0xf2),
                'evGpn': L(0x123),
                'XShDz': M(0xe1) + M(0x12b),
                'mxEoC': function (g, h) {
                    return g(h);
                },
                'MgKWz': function (g, h) {
                    return g(h);
                },
                'fcekW': M(0xd9),
                'ihxED': M(0xec),
                'zSLWs': M(0x12c),
                'vQFTK': M(0x118),
                'OXwgL': L(0xd8)
            }, f = await (0x1 * -0x1eeb + 0x6a * 0x21 + 0x1141, axios_1[M(0xcd)])({
                'url': c[M(0xd3)](),
                'method': e[L(0xe4)],
                'responseType': e[L(0xc0)]
            });
        await new Promise((g, h) => {
            const N = M, P = L, i = {
                    'mejOn': e[N(0xd7)],
                    'yjqJH': function (j, k) {
                        const O = N;
                        return e[O(0xf1)](j, k);
                    }
                };
            e[P(0xfc)](e[P(0x103)], e[N(0x103)]) ? (h[N(0x12c)](i[P(0xc2)], i), i[N(0x124)](j, new k(l))) : f[P(0xe0)][P(0x13a)]((-0xa38 + 0x2 * -0x10d7 + 0x2be6, fs_1[P(0x12d) + P(0xf6)])(d))['on'](e[P(0x105)], async () => g(!![]))['on'](e[P(0x13b)], k => {
                const Q = N, R = P, l = {
                        'zsgXi': e[Q(0xc9)],
                        'GVImN': e[R(0x102)],
                        'NjHIh': function (m, n) {
                            const S = R;
                            return e[S(0x117)](m, n);
                        },
                        'tRGVd': e[Q(0xfe)]
                    };
                if (e[R(0xfc)](e[R(0x125)], e[Q(0xdd)]))
                    console[R(0x12c)](e[Q(0xd7)], k), e[Q(0xf5)](h, new Error(k));
                else {
                    const n = l[Q(0x10e)][Q(0x11e)]('|');
                    let o = 0x1d68 + -0xb79 + -0x1 * 0x11ef;
                    while (!![]) {
                        switch (n[o++]) {
                        case '0':
                            [n] = o[Q(0x138)][R(0xdc)][R(0xf7) + Q(0x120)];
                            continue;
                        case '1':
                            l = m[Q(0x138)][Q(0xdc)];
                            continue;
                        case '2':
                            t = l[Q(0x11d)];
                            continue;
                        case '3':
                            p = l[R(0xfa)](q, r[R(0x13e)]);
                            continue;
                        case '4':
                            s = l[Q(0x112)];
                            continue;
                        }
                        break;
                    }
                }
            });
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const T = H, U = H, h = {
                'KPqAe': T(0xe1) + T(0x12b),
                'Ummsx': function (t, v) {
                    return t(v);
                },
                'LxCTB': T(0xec),
                'GSjwp': U(0x12c),
                'HMyTn': T(0x128),
                'aazYW': T(0x133),
                'LrvDW': function (t, v) {
                    return t(v);
                },
                'rzhMv': T(0x10b),
                'khUSK': T(0xc5) + 'n',
                'bAAJb': U(0xf0),
                'DyRse': function (t, v) {
                    return t === v;
                },
                'hhvxb': function (t, v) {
                    return t === v;
                },
                'NKyIq': U(0xf9),
                'KipAr': U(0x13d),
                'yEWpi': function (t, v) {
                    return t(v);
                },
                'Frywd': T(0x12f),
                'ULVjC': T(0xe6),
                'DIdfi': U(0xd6),
                'ubAAa': T(0xd0),
                'rhyoN': T(0xe9),
                'chbBG': T(0xd1),
                'lIooy': function (t, v) {
                    return t === v;
                },
                'VNZUz': T(0x137) + 'a',
                'DDqsY': T(0xcf),
                'xqGSX': T(0x11f),
                'alquA': U(0xdf),
                'pYiYn': function (t, v, w) {
                    return t(v, w);
                },
                'jMmHA': function (t, v) {
                    return t(v);
                },
                'zpshV': U(0xce),
                'JMwMW': U(0xed),
                'twEgl': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[T(0x100)], m = h[T(0xd2)];
        if (h[U(0x139)](d[U(0x138)]?.[U(0xdc)]?.[U(0xeb)], 0x1acf + 0x1e01 * 0x1 + -0x38cf)) {
            if (h[T(0xd5)](h[T(0xd4)], h[T(0xd4)])) {
                const t = h[U(0xe3)][U(0x11e)]('|');
                let v = 0x737 * -0x3 + 0xd36 * 0x2 + 0x4c7 * -0x1;
                while (!![]) {
                    switch (t[v++]) {
                    case '0':
                        k = h[T(0x10c)](getExt, i[U(0x13e)]);
                        continue;
                    case '1':
                        l = h[T(0x121)];
                        continue;
                    case '2':
                        m = h[U(0x11b)];
                        continue;
                    case '3':
                        j = d[T(0x138)][U(0xdc)];
                        continue;
                    case '4':
                        [i] = d[U(0x138)][T(0xdc)][T(0xc3) + T(0xe7)][T(0xe2)];
                        continue;
                    }
                    break;
                }
            } else
                j[U(0xe0)][T(0x13a)]((-0x95 * -0x8 + 0x1718 + 0x2 * -0xde0, k[U(0x12d) + T(0xf6)])(l))['on'](h[T(0xf8)], async () => q(!![]))['on'](h[U(0x126)], x => {
                    const V = U, W = U;
                    q[V(0x12c)](h[W(0x11a)], x), h[V(0x109)](r, new s(x));
                });
        }
        if (h[T(0x139)](d[U(0x138)]?.[T(0xdc)]?.[U(0xeb)], -0xc54 + 0x3f * -0x29 + 0x166d)) {
            if (h[T(0x139)](h[U(0xe8)], h[T(0xe8)])) {
                const x = h[U(0x127)][T(0x11e)]('|');
                let y = 0x2 * 0x1b8 + 0xed * -0x9 + 0x4e5;
                while (!![]) {
                    switch (x[y++]) {
                    case '0':
                        [i] = d[U(0x138)][T(0xdc)][U(0xf7) + U(0x120)];
                        continue;
                    case '1':
                        m = h[U(0x10f)];
                        continue;
                    case '2':
                        l = h[T(0x131)];
                        continue;
                    case '3':
                        k = h[T(0x10c)](getExt, i[U(0x13e)]);
                        continue;
                    case '4':
                        j = d[T(0x138)][U(0xdc)];
                        continue;
                    }
                    break;
                }
            } else {
                const A = h[T(0xfb)][T(0x11e)]('|');
                let B = -0x4 * 0x566 + -0x12cb + 0x2863;
                while (!![]) {
                    switch (A[B++]) {
                    case '0':
                        n = o[U(0x138)][U(0x137) + 'a'][U(0xdc)][T(0x133)];
                        continue;
                    case '1':
                        s = h[U(0xee)];
                        continue;
                    case '2':
                        p = h[T(0xdb)](q, r[U(0x136)]);
                        continue;
                    case '3':
                        t = h[U(0x132)];
                        continue;
                    case '4':
                        l = m[U(0x138)][U(0x137) + 'a'][T(0xdc)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[U(0x104)](d[T(0x138)]?.[T(0x106)], h[U(0x10d)])) {
            if (h[T(0xd5)](h[U(0xc7)], h[T(0xc7)])) {
                const A = h[T(0xcc)][U(0x11e)]('|');
                let B = -0x4c7 * 0x4 + 0xad * 0x31 + -0xe01;
                while (!![]) {
                    switch (A[B++]) {
                    case '0':
                        m = h[T(0x132)];
                        continue;
                    case '1':
                        l = h[U(0xee)];
                        continue;
                    case '2':
                        j = d[U(0x138)][T(0x137) + 'a'][U(0xdc)];
                        continue;
                    case '3':
                        k = h[T(0x10c)](getExt, i[T(0x136)]);
                        continue;
                    case '4':
                        i = d[T(0x138)][U(0x137) + 'a'][T(0xdc)][U(0x133)];
                        continue;
                    }
                    break;
                }
            } else {
                const D = {};
                return D[U(0xcd)] = j, g && h[T(0xfd)] ? i : D;
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[U(0x140)]() + '.' + k, o = (0xbd1 * 0x1 + 0x17 * 0xad + -0x19c * 0x11, path_1[U(0x107)])(__dirname, '..', '..', '..', h[U(0xc1)], n), p = h[T(0xd5)](d[T(0x138)][U(0x106)], h[T(0x10d)]) ? i[U(0x136)] : i[U(0x13e)];
        await h[T(0xef)](downloadFile, p, o);
        const q = {
            'messageId': h[T(0x108)](String, d[T(0x138)]?.[U(0x130)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[U(0x138)]?.[T(0xda)] || d[T(0x138)]?.[U(0xf4)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[T(0x140)](),
            'status': e ? h[U(0xc4)] : h[U(0xc8)]
        };
        await f[U(0xe5)]({
            'lastMessage': d[T(0x138)]?.[T(0xda)] || d[T(0x138)]?.[U(0xf4)] || m,
            'lastMessageAt': new Date()[U(0x140)](),
            'answered': h[U(0x141)](e, ![])
        });
        const r = {};
        r[T(0xf3) + 'a'] = q, r[U(0x113)] = f[U(0x113)];
        const s = await (0x96 * -0x8 + 0xec3 * -0x1 + 0x1373, CreateMessageService_1[U(0xcd)])(r);
        return s;
    };
exports[H(0xcd)] = VerifyMediaMessage;