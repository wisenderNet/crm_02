'use strict';
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x9e)) / (-0x792 + -0x9de + -0x5 * -0x37d) * (-parseInt(R(0x9b)) / (0x208c + -0x1 * 0x1f7 + -0x1e93)) + -parseInt(Q(0xee)) / (0x815 + -0x1 * -0x11d7 + 0x19e9 * -0x1) + -parseInt(Q(0xd6)) / (0x1314 + 0x909 + 0x1 * -0x1c19) * (parseInt(Q(0x107)) / (-0x12 * 0x138 + 0x12b * -0x1d + -0x9 * -0x634)) + -parseInt(R(0xd0)) / (-0x1 * 0x1f8e + 0x1 * 0x20cb + -0x137) * (-parseInt(R(0x101)) / (-0x167e + 0x1535 * 0x1 + 0x150)) + -parseInt(R(0xed)) / (-0x892 + -0x2 * -0x164 + -0x2e9 * -0x2) * (-parseInt(R(0xb0)) / (0x715 * -0x2 + -0x1d2c + 0x2b5f)) + parseInt(R(0xab)) / (-0x216f + 0x23 * 0x9 + 0x2 * 0x101f) * (parseInt(Q(0xcc)) / (0x2312 + 0x2 * 0x1021 + 0x1 * -0x4349)) + -parseInt(R(0x96)) / (0x1a6 * -0x4 + 0x2 * 0xcf + -0x1 * -0x506) * (-parseInt(Q(0xf9)) / (0x9b * 0x22 + 0x1ee * -0x1 + -0x129b));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x46b35 * 0x5 + -0x12a0a6 * 0x1 + 0x7 * 0x7a789));
var __importDefault = this && this[S(0x9c) + S(0xae)] || function (c) {
    const U = T;
    return c && c[U(0x10a)] ? c : { 'default': c };
};
const q = {};
q[T(0x8f)] = !![], Object[T(0xbe) + T(0xaa)](exports, S(0x10a), q);
function a() {
    const Z = [
        'ASC',
        'applicatio',
        '112165lxNOWE',
        'GPAkj',
        'aHiQd',
        '__esModule',
        'log',
        'sendAudio',
        'quotedMsg',
        'where',
        'VagmV',
        'Message\x20Up',
        'join',
        'chat:ack',
        'value',
        'chat',
        'filename',
        'jpeg',
        'fluent-ffm',
        'readFile',
        'sleepRando',
        '29370228NQrkdx',
        'odRis',
        'payload',
        'BuniJ',
        'file',
        '3041274tEZiJN',
        '__importDe',
        'CvAbj',
        '1rNFUtD',
        'messenger',
        'toFormat',
        'logger',
        'mediaName',
        'mp4',
        '../../util',
        'messengerI',
        'includes',
        'id:\x20',
        'ticket',
        'age\x20is\x20(te',
        'erty',
        '950YYrotR',
        '\x20message\x20(',
        '../../mode',
        'fault',
        'mediaType',
        '846Amsshx',
        'sharp',
        'path',
        'info',
        'date\x20ok',
        'cBbmc',
        'krlCV',
        'SrYky',
        'text',
        'messageId',
        'split',
        'public',
        'peg',
        'XWJnx',
        'defineProp',
        'uzaBY',
        'image',
        'ack',
        'rWqRT',
        'sequelize',
        'status',
        'HjPNn',
        'sendFile',
        '\x20|\x20Ticket:',
        'findAll',
        'timestamp',
        'contact',
        'mTime',
        '131670fnHuAM',
        'Error\x20mess',
        'document',
        'nant:\x20',
        '545430wchkNu',
        'SHWZT',
        'dataValues',
        'lte',
        'ers/socket',
        'JHKIx',
        '128FFwZqb',
        'error',
        'pending',
        'tBcLq',
        ')::\x20',
        'tenantId',
        'domTime',
        'body',
        '.mp4',
        'ptt',
        'mediaUrl',
        'ls/Ticket',
        '../../help',
        's/sleepRan',
        'qkfzg',
        'end',
        'default',
        'cbJSB',
        'Error\x20send',
        'sendText',
        'toBuffer',
        'video',
        'mAsmB',
        '30824RkDwdY',
        '2869485AgykxL',
        'yuebB',
        'sendImage',
        'closed',
        'createdAt',
        'WuIGT',
        'audio',
        'update',
        'saveToFile',
        'sended',
        'sendVideo',
        '13pdSYyQ',
        'Emit',
        'ls/Message',
        'AKLDb',
        's/logger',
        'wlSJk',
        'IEOfw',
        'type',
        '7LXDYDQ',
        'kVPsQ',
        'fs/promise',
        'ozRfL'
    ];
    a = function () {
        return Z;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x29 * 0xb5 + 0x2683 + 0x2fd * -0x3);
        let h = e[f];
        return h;
    }, b(c, d);
}
const promises_1 = require(T(0x103) + 's'), fluent_ffmpeg_1 = __importDefault(require(S(0x93) + T(0xbc))), path_1 = require(T(0xb2)), sequelize_1 = require(T(0xc3)), sharp_1 = __importDefault(require(T(0xb1))), socketEmit_1 = __importDefault(require(S(0xe2) + S(0xd4) + T(0xfa))), Message_1 = __importDefault(require(T(0xad) + T(0xfb))), Ticket_1 = __importDefault(require(T(0xad) + S(0xe1))), logger_1 = require(S(0xa4) + T(0xfd)), sleepRandomTime_1 = require(T(0xa4) + S(0xe3) + T(0xdc)), MessengerSendMessagesSystem = async (l, m) => {
        const V = T, W = T, n = {
                'odRis': V(0xa3),
                'GPAkj': W(0xd7),
                'CvAbj': W(0xe5),
                'SHWZT': W(0xd8),
                'tBcLq': W(0xca),
                'cbJSB': W(0xa8),
                'AKLDb': V(0xf1),
                'WuIGT': W(0x9f),
                'XWJnx': V(0x10d),
                'aHiQd': W(0xf2),
                'mAsmB': W(0x105),
                'wlSJk': W(0x90),
                'krlCV': V(0xb8),
                'cBbmc': W(0xbb),
                'ozRfL': function (t, u) {
                    return t === u;
                },
                'HjPNn': V(0xf4),
                'BuniJ': W(0xdf),
                'yuebB': V(0xc0),
                'JHKIx': W(0xeb),
                'qkfzg': W(0x106) + 'n',
                'kVPsQ': V(0x9a),
                'IEOfw': W(0xce),
                'SrYky': W(0xf7),
                'VagmV': W(0x112),
                'rWqRT': W(0x110) + V(0xb4),
                'uzaBY': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0xd1)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0xd3)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0xe6)][V(0xc8)]({
                'where': p,
                'include': [
                    n[W(0xd9)],
                    {
                        'model': Ticket_1[V(0xe6)],
                        'as': n[W(0xe7)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0xfc)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[W(0xf3)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0xd9)]]
                    },
                    {
                        'model': Message_1[V(0xe6)],
                        'as': n[V(0xbd)],
                        'include': [n[W(0xd9)]]
                    }
                ],
                'order': [[
                        n[V(0x109)],
                        n[V(0xec)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0xca)][V(0xa5) + 'd'];
            try {
                if (![
                        n[W(0xfe)],
                        n[W(0xb6)]
                    ][V(0xa6)](u[V(0xaf)]) && u[V(0xa2)]) {
                    const D = (-0xeb5 + -0x24 * -0xe9 + -0x17 * 0xc9, path_1[V(0x111)])(__dirname, '..', '..', '..', n[V(0xb5)]), E = (-0xe5e + 0x59 * -0x1 + 0xeb7, path_1[W(0x111)])(D, u[W(0xa2)]), F = await (0x2f * 0x1d + 0x149c + -0x19ef, promises_1[V(0x94)])(E);
                    console[V(0x10b)](E);
                    if (n[V(0x104)](u[W(0xaf)], n[W(0xc5)]) || n[W(0x104)](u[V(0xaf)], n[W(0x99)])) {
                        const G = u[W(0xa2)][W(0xba)]('.'), H = (-0xdc3 + 0xd74 + -0x4f * -0x1, path_1[W(0x111)])(D, G[0x2f * -0x56 + -0x4 * 0x322 + 0x1c52] + V(0xde));
                        await new Promise((J, K) => {
                            const X = W, Y = V;
                            (-0x16f9 + 0x228d + -0xb94, fluent_ffmpeg_1[X(0xe6)])(E)[X(0xa0)](n[Y(0x97)])['on'](n[X(0x108)], L => K(L))['on'](n[X(0x9d)], () => J(!![]))[Y(0xf6)](H);
                        });
                        const I = await (-0x472 + -0x1627 + -0x1 * -0x1a99, promises_1[V(0x94)])(H);
                        s = await l[V(0x10c)](w, I);
                    }
                    if (n[V(0x104)](u[W(0xaf)], n[V(0xef)])) {
                        const J = await (-0x15a9 + -0x80 * 0x3e + 0x34a9, sharp_1[V(0xe6)])(F)[V(0x92)]()[V(0xea)](), K = {};
                        K[W(0x91)] = u[V(0xa2)], s = await l[W(0xf0)](w, J, K);
                    }
                    if (n[W(0x104)](u[V(0xaf)], n[W(0xd5)])) {
                        const L = {};
                        L[V(0x91)] = u[V(0xa2)], s = await l[V(0xf8)](w, F, L);
                    }
                    if ([
                            n[W(0xe4)],
                            n[W(0x102)],
                            n[V(0xff)]
                        ][W(0xa6)](u[W(0xaf)])) {
                        const M = {};
                        M[V(0x91)] = u[V(0xa2)], s = await l[V(0xc6)](w, F, M);
                    }
                }
                [
                    n[V(0xfe)],
                    n[V(0xb6)]
                ][V(0xa6)](u[V(0xaf)]) && !u[V(0xa2)] && (s = await l[W(0xe9)](w, u[W(0xdd)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0xc9)] = u[W(0xc9)], x[V(0xb9)] = s[W(0xb9)], x[W(0xc4)] = n[W(0xb7)], x[V(0xc1)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[W(0x10e)] = A, await Message_1[V(0xe6)][V(0xf5)](z, B);
                const C = {};
                C[W(0xdb)] = v[V(0xdb)], C[W(0x100)] = n[V(0x10f)], C[V(0x98)] = { ...u[W(0xd2)] }, C[V(0x98)][V(0xe0)] = u[V(0xe0)], C[V(0x98)]['id'] = u['id'], C[V(0x98)][V(0xc9)] = u[V(0xc9)], C[V(0x98)][V(0xb9)] = s[V(0xb9)], C[V(0x98)][V(0xc4)] = n[W(0xb7)], C[V(0x98)][V(0xc1)] = 0x2, (-0xfe9 * -0x1 + -0xf4 * -0x5 + 0x4f * -0x43, socketEmit_1[V(0xe6)])(C), logger_1[W(0xa1)][W(0xb3)](n[W(0xc2)]), await (0x1888 + -0xdf6 + 0x21 * -0x52, sleepRandomTime_1[V(0x95) + W(0xcb)])({
                    'minMilliseconds': n[W(0xbf)](Number, -0x1 * 0x7a7 + 0x1 * -0x1e28 + 0x27c3),
                    'maxMilliseconds': n[W(0xbf)](Number, -0x86 * 0x1f + -0x424 * 0x7 + 0x3312)
                });
            } catch (N) {
                const O = u['id'], P = u[W(0xa8)]['id'];
                logger_1[V(0xa1)][W(0xd7)](W(0xcd) + V(0xa9) + W(0xcf) + m + (V(0xc7) + '\x20') + P + ')'), logger_1[W(0xa1)][W(0xd7)](V(0xe8) + W(0xac) + W(0xa7) + O + V(0xda) + N);
            }
        }
    };
exports[S(0xe6)] = MessengerSendMessagesSystem;