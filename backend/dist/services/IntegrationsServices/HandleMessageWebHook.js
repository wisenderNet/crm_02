'use strict';
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x23e)) / (0xb7e + -0x5b9 + -0x5c4 * 0x1) * (parseInt(Q(0x226)) / (-0x7fd * -0x2 + -0x5ca + -0xa2e)) + parseInt(R(0x1f8)) / (-0x16c8 + -0x1e1f + 0x34ea) * (parseInt(Q(0x216)) / (0x455 * -0x3 + 0xb74 + 0x18f)) + -parseInt(Q(0x1e5)) / (0x99b * 0x1 + 0x1f2 * -0x10 + 0x158a) + -parseInt(R(0x1cd)) / (0xbe7 + -0x633 + 0x1 * -0x5ae) * (-parseInt(R(0x1db)) / (-0x38d * 0x3 + -0x3 * 0xacf + -0x89f * -0x5)) + -parseInt(R(0x1ee)) / (-0x62b * 0x1 + 0x1b35 + -0x1502) + -parseInt(Q(0x1e2)) / (0x3 * 0x853 + 0x79f * 0x1 + -0x208f) + parseInt(R(0x21a)) / (-0x12 * -0xc + 0xe4 * 0xc + 0x1 * -0xb7e) * (parseInt(R(0x1e8)) / (-0x29 * -0x11 + 0x7 * 0x36d + -0x1aa9));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x5 * -0xb224 + -0x4d * 0x13ed + -0x100af * -0x10));
function a() {
    const X = [
        'MYsUq',
        '257460sTJCxV',
        '__importDe',
        'azoNr',
        '\x20encontrad',
        'Integração',
        'ssageId\x20ou',
        'CEZCW',
        'axios',
        'GjmoC',
        'EOGSa',
        'elo\x20menos\x20',
        'n/json',
        'kuVYB',
        'Erro\x20ao\x20in',
        '182yXXfwx',
        '\x20N8N:\x20',
        'ls/Message',
        '\x20id).',
        'ls/Contact',
        'userId',
        'cExig',
        '13073211llzmMC',
        'whatsapp',
        'KEY',
        '1850115cUmqFZ',
        'pushname',
        'Url',
        '3093607aJzAMm',
        'EuLsq',
        'epaIx',
        'WhatsApp\x20n',
        'TIkiI',
        'user',
        '10215080gOVDEM',
        '\x20com\x20N8N\x20n',
        'tegrations',
        'message',
        'fromMe',
        'ão\x20encontr',
        'value',
        'status',
        'email',
        'TEjJN',
        '6UMsyfp',
        'isDeleted',
        'method',
        'defineProp',
        'ls/QueueIn',
        'fault',
        '__esModule',
        'queueId',
        'fRzzV',
        'contact',
        'erty',
        'mediaUrl',
        'YDfcu',
        'findOne',
        'edited',
        'body',
        'bwsNR',
        'VFUnT',
        'findByPk',
        'tegrar\x20com',
        'name',
        'whatsappId',
        'X-N8N-API-',
        'Content-Ty',
        'opHcu',
        'where',
        'reactions',
        'isGroup',
        'Mensagem\x20n',
        'messageBod',
        '1472488HudXlB',
        'NqvOu',
        'profilePic',
        'headers',
        '50bMqUKN',
        'jOaGE',
        'ticketId',
        '../../mode',
        'kWDkJ',
        'VNBIo',
        'timestamp',
        'messageId',
        'ZlLoM',
        'eThpH',
        'urlN8N',
        'HjgxW',
        '1456034ogIbYp',
        'sendType',
        'sNQLg',
        'POST',
        'Você\x20deve\x20',
        'EckeS',
        'hLkOL',
        'ls/Whatsap',
        'ls/User',
        'mediaType',
        'error',
        'fornecer\x20p',
        'protocol',
        'ada.',
        'xDUck',
        'azdFW',
        'n8nApiKey',
        'ls/Ticket',
        'dvWSi',
        'applicatio',
        'NyYnG',
        'um\x20identif',
        'gkJsa',
        'HandleMess',
        '1Sdyvcv',
        'YWLNl',
        'Ticket\x20não',
        'contactId',
        'data',
        'ticket',
        'number',
        'kSizF',
        'Tsrpg',
        'url',
        'default',
        'ado.',
        'ageWebHook',
        'icador\x20(me',
        'zSCFi'
    ];
    a = function () {
        return X;
    };
    return a();
}
var __importDefault = this && this[S(0x1ce) + T(0x1fd)] || function (c) {
    const U = T;
    return c && c[U(0x1fe)] ? c : { 'default': c };
};
const k = {};
k[T(0x1f4)] = !![], Object[S(0x1fb) + T(0x202)](exports, T(0x1fe), k), exports[T(0x23d) + S(0x1c9)] = void (0x10 * 0x269 + -0x17 * 0x191 + -0x3b * 0xb);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x16f5 + -0x46c * 0x4 + 0x2a6d);
        let h = e[f];
        return h;
    }, b(c, d);
}
const axios_1 = __importDefault(require(S(0x1d4))), QueueIntegrations_1 = __importDefault(require(S(0x21d) + T(0x1fc) + S(0x1f0))), Ticket_1 = __importDefault(require(S(0x21d) + T(0x237))), Message_1 = __importDefault(require(S(0x21d) + S(0x1dd))), Whatsapp_1 = __importDefault(require(T(0x21d) + T(0x22d) + 'p')), Contact_1 = __importDefault(require(T(0x21d) + T(0x1df))), User_1 = __importDefault(require(S(0x21d) + S(0x22e))), HandleMessageWebHook = async (m, n, o) => {
        const V = S, W = T, p = {};
        p[V(0x1ec)] = W(0x240) + V(0x1d0) + 'o.', p[W(0x208)] = V(0x1d1) + V(0x1ef) + V(0x1f3) + W(0x233), p[V(0x200)] = V(0x1eb) + V(0x1f3) + W(0x1c8), p[V(0x210)] = V(0x214) + W(0x1f3) + W(0x233), p[W(0x209)] = V(0x22a) + W(0x231) + W(0x1d7) + V(0x23b) + W(0x1ca) + V(0x1d2) + W(0x1de), p[V(0x22b)] = function (r, s) {
            return r !== s;
        }, p[V(0x217)] = V(0x1d3), p[W(0x1cb)] = function (r, s) {
            return r === s;
        }, p[V(0x23f)] = W(0x22c), p[W(0x245)] = W(0x21e), p[V(0x225)] = V(0x1cf), p[V(0x1cc)] = W(0x204), p[W(0x1e1)] = V(0x1ea), p[V(0x23c)] = W(0x23a), p[V(0x228)] = function (r, s) {
            return r === s;
        }, p[W(0x21f)] = W(0x1f7), p[V(0x238)] = V(0x223), p[V(0x1d6)] = function (r, s) {
            return r === s;
        }, p[W(0x1d9)] = W(0x222), p[V(0x234)] = W(0x1e9), p[V(0x21b)] = V(0x246), p[W(0x235)] = V(0x229), p[V(0x1d5)] = W(0x239) + V(0x1d8);
        const q = p;
        try {
            const r = await QueueIntegrations_1[V(0x248)][V(0x20a)](m);
            if (!r || !r[W(0x224)]) {
                if (q[W(0x22b)](q[V(0x217)], q[W(0x217)])) {
                    const F = {};
                    return F[V(0x248)] = z, g && x[V(0x1fe)] ? y : F;
                } else
                    throw new Error(q[W(0x208)]);
            }
            let s;
            if (n) {
                if (q[W(0x1cb)](q[V(0x23f)], q[W(0x245)]))
                    throw new d(q[W(0x1ec)]);
                else {
                    const G = {};
                    G[V(0x221)] = n;
                    const H = {};
                    H[V(0x211)] = G, s = await Message_1[W(0x248)][V(0x205)](H);
                }
            } else {
                if (o) {
                    if (q[W(0x1cb)](q[W(0x225)], q[W(0x1cc)]))
                        throw new d(q[W(0x208)]);
                    else {
                        const J = {};
                        J['id'] = o;
                        const K = {};
                        K[W(0x211)] = J, s = await Message_1[W(0x248)][W(0x205)](K);
                    }
                } else {
                    if (q[W(0x22b)](q[V(0x1e1)], q[W(0x23c)]))
                        throw new Error(q[V(0x209)]);
                    else
                        throw new d(q[V(0x200)]);
                }
            }
            if (!s) {
                if (q[V(0x228)](q[V(0x21f)], q[V(0x238)]))
                    throw new d(q[V(0x210)]);
                else
                    throw new Error(q[V(0x210)]);
            }
            const t = await Ticket_1[W(0x248)][W(0x20a)](s[V(0x21c)]);
            if (!t) {
                if (q[V(0x1d6)](q[V(0x1d9)], q[V(0x234)]))
                    throw new d(q[V(0x209)]);
                else
                    throw new Error(q[W(0x1ec)]);
            }
            const u = t[V(0x241)] ? await Contact_1[V(0x248)][W(0x20a)](t[W(0x241)]) : null, v = t[V(0x1e0)] ? await User_1[V(0x248)][V(0x20a)](t[W(0x1e0)]) : null, w = await Whatsapp_1[W(0x248)][V(0x20a)](t[W(0x20d)]);
            if (!w) {
                if (q[W(0x22b)](q[V(0x21b)], q[W(0x21b)])) {
                    g[W(0x230)](V(0x1da) + V(0x20b) + V(0x1dc) + x[W(0x1f1)]);
                    throw new y(W(0x1da) + W(0x20b) + W(0x1dc) + z[W(0x1f1)]);
                } else
                    throw new Error(q[W(0x200)]);
            }
            const x = {};
            x['id'] = t['id'], x[W(0x1f5)] = t[W(0x1f5)], x[V(0x232)] = t[V(0x232)], x[W(0x1ff)] = t[V(0x1ff)];
            const y = {};
            y['id'] = w['id'], y[W(0x20c)] = w[V(0x20c)];
            const z = {};
            z[V(0x221)] = s[W(0x221)], z[V(0x215) + 'y'] = s[V(0x207)], z[W(0x220)] = s[V(0x220)], z[V(0x1f5)] = s[W(0x1f5)], z[V(0x1f2)] = s[W(0x1f2)], z[W(0x22f)] = s[V(0x22f)], z[W(0x203)] = s[W(0x203)], z[V(0x1f9)] = s[V(0x1f9)], z[W(0x227)] = s[V(0x227)], z[W(0x206)] = s[V(0x206)], z[W(0x212)] = s[V(0x212)], z[V(0x243)] = x, z[V(0x201)] = u ? {
                'id': u['id'],
                'name': u[W(0x20c)],
                'phoneNumber': u[V(0x244)],
                'profilePicUrl': u[V(0x218) + V(0x1e7)],
                'email': u[V(0x1f6)],
                'isGroup': u[W(0x213)],
                'pushname': u[W(0x1e6)]
            } : null, z[V(0x1ed)] = v ? {
                'id': v['id'],
                'name': v[W(0x20c)],
                'email': v[V(0x1f6)]
            } : null, z[W(0x1e3)] = y;
            const A = z, B = {};
            B[V(0x1fa)] = q[V(0x235)], B[V(0x247)] = r[V(0x224)], B[V(0x219)] = {}, B[W(0x242)] = A, B[V(0x219)][W(0x20f) + 'pe'] = q[V(0x1d5)], B[V(0x219)][V(0x20e) + W(0x1e4)] = r[V(0x236)] || '';
            const C = B, D = await (0x12c0 + -0x1fa8 + -0x4 * -0x33a, axios_1[V(0x248)])(C);
        } catch (P) {
            console[W(0x230)](V(0x1da) + W(0x20b) + V(0x1dc) + P[V(0x1f1)]);
            throw new Error(W(0x1da) + V(0x20b) + W(0x1dc) + P[V(0x1f1)]);
        }
    };
exports[T(0x23d) + S(0x1c9)] = HandleMessageWebHook;