'use strict';
function a() {
    const J = [
        'ticket',
        'fZxLa',
        '32652RfAJcI',
        'NiIHJ',
        'BwoEW',
        'Qakef',
        'ers/socket',
        'contact',
        'Emit',
        'quotedMsg',
        'JgmRq',
        'video',
        'includes',
        'OInVj',
        'lZLSd',
        'yoaWJ',
        'qaluJ',
        'findAll',
        'dataValues',
        '1679432FgLgcS',
        'rbBjQ',
        'FIPvy',
        'defineProp',
        '3097734WTIcKk',
        'AoYVH',
        '3976330PuLyrV',
        'xjXbN',
        'QPBQl',
        'nflTm',
        'number',
        'chat:ack',
        'sAsRead',
        'messageId',
        'tokenAPI',
        '10018856qVAhfX',
        'rWgIx',
        'body',
        'ers/SetTic',
        'caption',
        'ASC',
        'sLmNW',
        'FSQZk',
        'sequelize',
        '2pimuwi',
        'FlqBS',
        'messages',
        'UTpYk',
        'image',
        'drqEI',
        '../../mode',
        'voice',
        '13750srfKmg',
        'mediaUrl',
        'lte',
        'aupiR',
        'text',
        'value',
        '../../util',
        'ltzza',
        'sended',
        '917635XtURgN',
        'ack',
        'default',
        'type',
        'smKUs',
        '6qiiTmy',
        'DabRz',
        'AWnkM',
        'ZyhQy',
        'mediaName',
        '__esModule',
        'createdAt',
        'info',
        'ls/Ticket',
        'MDXAN',
        'RnhbO',
        's/logger',
        'lEuqw',
        'uGyrp',
        '__importDe',
        'whatsapp',
        'wnrHg',
        'age',
        'uCVte',
        'where',
        './SentMess',
        '../../help',
        '7043862rmYEPB',
        'ls/Whatsap',
        'bSYZC',
        'document',
        'ketMessage',
        'JSDOH',
        'timestamp',
        'waba',
        '360',
        'BZETm',
        'Message\x20Up',
        'chat',
        'individual',
        'logger',
        'NLlMy',
        'status',
        'jaByE',
        'pending',
        'kVIwe',
        'YyidT',
        'RhQBe',
        'GEpKN',
        'applicatio',
        'sMxvt',
        'gffVU',
        'payload',
        'cUGrl',
        'mediaType',
        'YIUcw',
        'LvDhd',
        'audio',
        'WhXqs',
        'aHSid',
        'MOMMo',
        'XEjwU',
        'update',
        'ls/Message',
        'BdvRT',
        'cjriC',
        'ljjIZ',
        'tenantId',
        'RRLim',
        'wabaMediaI',
        'fault',
        'erty',
        'date\x20ok',
        'hAIRt',
        'apiKey',
        'txZhh',
        'message'
    ];
    a = function () {
        return J;
    };
    return a();
}
const C = b, D = b;
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(A(0xff)) / (0xf71 + 0x13e + -0x10ae) * (-parseInt(A(0xee)) / (0xba2 + -0x43d * 0x7 + 0x95 * 0x1f)) + -parseInt(B(0x104)) / (-0x9ec + -0x1fd4 + 0x1 * 0x29c3) * (parseInt(B(0xd6)) / (-0x11 * -0x1de + 0x3c + -0x2 * 0xffb)) + -parseInt(A(0xdc)) / (0xc11 * 0x1 + -0x5 * -0x6ce + 0x1 * -0x2e12) + parseInt(B(0xda)) / (0x11eb + -0x7 * -0x56f + 0x2 * -0x1bf7) + -parseInt(A(0x11a)) / (-0x2553 + -0x6c8 + 0x2c22) + -parseInt(A(0xe5)) / (0x73 + 0x6 * 0x39 + -0x1c1) + -parseInt(A(0x14e)) / (0x1e2e + 0x13 * 0xa3 + -0x2a3e) * (-parseInt(A(0xf6)) / (0x595 * 0x6 + 0x9f8 + -0x18d * 0x1c));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x3ecf * 0x53 + -0x10fdb + -0x3 * 0x2e807));
var __importDefault = this && this[C(0x112) + C(0x145)] || function (c) {
    const E = D;
    return c && c[E(0x109)] ? c : { 'default': c };
};
const m = {};
m[C(0xfb)] = !![], Object[D(0xd9) + C(0x146)](exports, C(0x109), m);
const sequelize_1 = require(D(0xed)), SetTicketMessagesAsRead_1 = __importDefault(require(C(0x119) + D(0xe8) + C(0x11e) + D(0xe2))), socketEmit_1 = __importDefault(require(D(0x119) + D(0x152) + C(0x154))), Message_1 = __importDefault(require(D(0xf4) + C(0x13e))), Ticket_1 = __importDefault(require(D(0xf4) + C(0x10c))), Whatsapp_1 = __importDefault(require(D(0xf4) + C(0x11b) + 'p')), logger_1 = require(D(0xfc) + D(0x10f)), SentMessage_1 = __importDefault(require(D(0x118) + C(0x115))), buildWabaMessage360 = async (h, i) => {
        const F = D, G = D, j = {
                'RnhbO': F(0x157),
                'yoaWJ': F(0x138),
                'lEuqw': F(0xf2),
                'AWnkM': function (l, o) {
                    return l(o);
                },
                'gffVU': F(0x126),
                'drqEI': G(0xfa),
                'uGyrp': function (l, o) {
                    return l === o;
                },
                'FlqBS': F(0x130) + 'n',
                'OInVj': function (l, o) {
                    return l === o;
                },
                'JgmRq': G(0x11d),
                'XEjwU': G(0xf1),
                'FIPvy': function (l, o) {
                    return l === o;
                },
                'fZxLa': function (l, o) {
                    return l === o;
                },
                'xjXbN': G(0x12f),
                'WhXqs': G(0x12d),
                'RhQBe': function (l, o) {
                    return l === o;
                },
                'FSQZk': function (l, o) {
                    return l !== o;
                },
                'rbBjQ': G(0x150),
                'aupiR': function (l, o) {
                    return l === o;
                },
                'wnrHg': G(0xf5),
                'DabRz': F(0xde),
                'qaluJ': G(0x13b),
                'hAIRt': function (l, o) {
                    return l === o;
                },
                'JSDOH': G(0x125),
                'kVIwe': function (l, o) {
                    return l === o;
                },
                'NiIHJ': function (l, o) {
                    return l === o;
                },
                'MDXAN': F(0x134),
                'Qakef': F(0x136)
            };
        let k = {
            'timestamp': j[G(0x106)](String, h[G(0x120)]),
            'recipient_type': j[G(0x132)],
            'to': i,
            'type': j[F(0xf3)]
        };
        if (j[G(0x111)](h[F(0x135)], j[G(0xef)]) || j[F(0xd0)](h[G(0x135)], j[G(0x156)])) {
            if (j[F(0xd0)](j[F(0x13c)], j[F(0x13c)])) {
                const l = {};
                l['id'] = h[G(0x144) + 'd'], l[F(0xe9)] = h[G(0xe7)] || h[G(0x108)] || '' || '', k = {
                    ...k,
                    'type': j[F(0x156)],
                    'document': l
                };
            } else {
                const p = {};
                p[F(0xe7)] = h[F(0xe7)];
                const q = { ...g };
                q[F(0xfa)] = p, f = q;
            }
        }
        if (j[F(0xd8)](h[F(0x135)], j[G(0x110)])) {
            if (j[G(0x14d)](j[F(0xdd)], j[F(0x139)])) {
                const q = {};
                return q[G(0x101)] = j, g && h[G(0x109)] ? i : q;
            } else {
                const q = {};
                q['id'] = h[G(0x144) + 'd'], q[G(0xe9)] = h[G(0xe7)] || h[G(0x108)] || '', k = {
                    ...k,
                    'type': j[G(0x110)],
                    'image': q
                };
            }
        }
        if (j[G(0x12e)](h[G(0x135)], j[G(0x10e)])) {
            if (j[F(0xec)](j[F(0xd7)], j[G(0xd7)])) {
                const s = {};
                s['id'] = j[G(0x144) + 'd'], s[F(0xe9)] = k[G(0xe7)] || l[G(0x108)] || '';
                const t = { ...i };
                t[G(0x102)] = j[G(0x10e)], t[F(0x157)] = s, h = t;
            } else {
                const s = {};
                s['id'] = h[G(0x144) + 'd'], s[G(0xe9)] = h[G(0xe7)] || h[F(0x108)] || '', k = {
                    ...k,
                    'type': j[G(0x10e)],
                    'video': s
                };
            }
        }
        if (j[G(0xd0)](h[F(0x135)], j[G(0xd2)]) || j[F(0xf9)](h[G(0x135)], j[G(0x114)])) {
            if (j[G(0xec)](j[F(0x105)], j[G(0xd3)])) {
                const t = {};
                t['id'] = h[G(0x144) + 'd'], t[F(0xe9)] = h[G(0xe7)] || h[F(0x108)] || '', k = {
                    ...k,
                    'type': j[G(0xd2)],
                    'audio': t
                };
            } else {
                const v = {};
                v['id'] = j[G(0x144) + 'd'], v[F(0xe9)] = k[G(0xe7)] || l[G(0x108)] || '';
                const w = { ...i };
                w[G(0x102)] = j[F(0xd2)], w[G(0x138)] = v, w = w;
            }
        }
        if (j[F(0x148)](h[G(0x135)], j[F(0x11f)]) || j[G(0x12c)](h[F(0x135)], j[F(0xf3)])) {
            if (j[G(0x14f)](j[G(0x10d)], j[G(0x151)])) {
                const w = {};
                w['id'] = j[G(0x144) + 'd'], w[G(0xe9)] = k[F(0xe7)] || l[F(0x108)] || '';
                const x = { ...i };
                x[F(0x102)] = j[G(0x110)], x[F(0xf2)] = w, x = x;
            } else {
                const w = {};
                w[G(0xe7)] = h[G(0xe7)], k = {
                    ...k,
                    'text': w
                };
            }
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': D(0x12b),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][D(0xf8)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = C, I = C, j = {
                'sLmNW': H(0x11d),
                'ltzza': H(0x153),
                'txZhh': H(0x14c),
                'cjriC': H(0x121),
                'AoYVH': I(0x113),
                'smKUs': H(0x122),
                'uCVte': I(0x155),
                'BdvRT': H(0x10a),
                'ljjIZ': H(0xea),
                'nflTm': function (l, o) {
                    return l === o;
                },
                'BZETm': I(0x13a),
                'lZLSd': H(0xe6),
                'NLlMy': function (l, o) {
                    return l(o);
                },
                'RRLim': I(0xfa),
                'LvDhd': H(0x125),
                'jaByE': function (l, o, p) {
                    return l(o, p);
                },
                'ZyhQy': I(0xfe),
                'bSYZC': H(0xe1),
                'sMxvt': H(0x124) + I(0x147)
            }, k = await Message_1[H(0x101)][H(0xd4)]({
                'where': where,
                'include': [
                    j[I(0xfd)],
                    {
                        'model': Ticket_1[I(0x101)],
                        'as': j[I(0x14a)],
                        'where': {
                            'tenantId': i[I(0x142)],
                            'channel': j[I(0x140)]
                        },
                        'include': [
                            j[I(0xfd)],
                            {
                                'model': Whatsapp_1[H(0x101)],
                                'as': j[H(0xdb)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[H(0x140)],
                                    'wabaBSP': j[I(0x103)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[H(0x101)],
                        'as': j[I(0x116)],
                        'include': [j[H(0xfd)]]
                    }
                ],
                'order': [[
                        j[H(0x13f)],
                        j[I(0x141)]
                    ]]
            });
        for (const l of k) {
            if (j[I(0xdf)](j[I(0x123)], j[I(0xd1)])) {
                const p = {};
                p['id'] = j[I(0x144) + 'd'], p[I(0xe9)] = k[I(0xe7)] || l[H(0x108)] || '' || '';
                const q = { ...i };
                q[H(0x102)] = j[H(0xeb)], q[I(0x11d)] = p, h = q;
            } else {
                const {ticket: p} = l, q = j[H(0x128)](String, p[H(0x153)][I(0xe0)]);
                if (![
                        j[H(0x143)],
                        j[I(0x137)]
                    ][H(0xcf)](l[H(0x135)]) && l[I(0xf7)] && !l[H(0x144) + 'd']) {
                }
                const r = await j[I(0x12a)](buildWabaMessage360, l, q), s = {};
                s[H(0x14b)] = r, s[I(0x149)] = i[H(0xe4)];
                const t = await (0x133c * 0x2 + 0x13bd + -0x3a35, SentMessage_1[H(0x101)])(s), u = { ...l };
                u[I(0xe3)] = t[I(0xf0)][0x1 * 0x1f3f + -0xa3f + -0x1500]['id'], u[I(0x129)] = j[H(0x107)], u[I(0x100)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[H(0x117)] = x, await Message_1[I(0x101)][H(0x13d)](w, y);
                const z = {};
                z[I(0x142)] = p[I(0x142)], z[I(0x102)] = j[H(0x11c)], z[H(0x133)] = { ...v[H(0xd5)] }, z[H(0x133)][I(0xf7)] = l[H(0xf7)], z[H(0x133)][H(0xe3)] = v[H(0xe3)], z[H(0x133)][I(0x129)] = j[H(0x107)], z[H(0x133)][H(0x100)] = 0x2, (-0x2ae + -0x24d * -0xe + -0x1d88, socketEmit_1[H(0x101)])(z), logger_1[I(0x127)][H(0x10b)](j[I(0x131)]), await (-0x33 * 0x50 + 0x527 * -0x1 + 0x1 * 0x1517, SetTicketMessagesAsRead_1[H(0x101)])(p);
            }
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xaf * -0x26 + 0xe55 + 0x4 * -0x9e0);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[C(0x101)] = Waba360SendMessagesSystem;