'use strict';
const z = b, A = b;
(function (c, d) {
    const x = b, y = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(x(0x148)) / (-0x11ab * 0x1 + -0xe9c + 0x2048) + -parseInt(x(0x17a)) / (0x1783 + -0x1 * -0x23da + -0x3b5b) + parseInt(y(0x18b)) / (0x4ac + 0xc97 * -0x1 + -0x23 * -0x3a) * (parseInt(x(0x14e)) / (0x3df * 0x2 + -0x237d + 0x1bc3)) + parseInt(x(0x161)) / (-0x10d * -0x1a + -0xf34 + -0xc19) + parseInt(y(0x13d)) / (-0x3 * -0x769 + 0x1 * 0x1a06 + -0x303b) + parseInt(y(0x167)) / (0x5 * -0x59a + 0x1a8 + -0x1 * -0x1a61) + -parseInt(x(0x15b)) / (0x496 + 0xc11 + 0x17 * -0xb9) * (parseInt(y(0x14c)) / (-0xd21 * 0x1 + 0x8d1 * 0x3 + -0x13 * 0xb3));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1b6e * 0x1d + 0x1a2118 * 0x1 + 0x2 * -0x70c99));
var __importDefault = this && this[z(0x149) + z(0x146)] || function (c) {
    const B = z;
    return c && c[B(0x14a)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x7d6 + 0x1 * 0x3dc + 0x12 * -0x96);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const P = [
        'HaUQQ',
        'KlPRM',
        'video',
        '11425896szFRRO',
        'aPqEA',
        'env',
        'WNLOAD_MED',
        'IA:\x20',
        'NYMHw',
        'sZWpc',
        'createWrit',
        'tSgiK',
        'fault',
        'kZgaR',
        '579140zPKVmn',
        '__importDe',
        '__esModule',
        'responseTy',
        '44592624iZCxlu',
        'KVPfX',
        '320776msmsYF',
        'EBbaA',
        'ePUtj',
        'TXHjN',
        '360_NOT_DO',
        'mime_type',
        'MXDHA',
        'error',
        'flprQ',
        'tokenAPI',
        'TOKOa',
        '../../erro',
        'PKGoH',
        '8LYxnav',
        'aVqkc',
        'baeAm',
        'logger',
        'VzDZj',
        'uiCKj',
        '5865230wugUOs',
        'voice',
        'data',
        '/v1/media/',
        'iCGJJ',
        'PUpvb',
        '12037032nqpcrn',
        's/logger',
        'document',
        'YenNd',
        'JlDwp',
        'method',
        'fIeIB',
        'path',
        'vIfIp',
        'LOAD',
        'API_URL_36',
        'hmHQE',
        'wqwHG',
        'url',
        'audio',
        'uSOrp',
        'whWht',
        'HzcoQ',
        'vKgPQ',
        '2547424sqygHo',
        'WwMmq',
        'erty',
        'RxIBa',
        'ERROR\x20DONW',
        'drEBb',
        'defineProp',
        'stream',
        'CIHai',
        'PMrqD',
        'xtPbR',
        'pipe',
        'default',
        '../../util',
        'wtoDO',
        'length',
        'public',
        '69QGPTgE',
        'fTros',
        'split',
        'FwlUa',
        'image',
        'filename',
        'D360-API-K',
        'JaTGW',
        'Jgjnl',
        'eNhqu',
        'tyqcm',
        'headers',
        'fVYYT',
        'rs/AppErro',
        'join',
        'OxOMr',
        'XFuCm',
        'XrqTH',
        'axios',
        'eStream',
        'value',
        'finish',
        'kFxyF',
        'KlvEW',
        'GET',
        'Tstqo',
        'vBPnF',
        'getTime',
        'EcLHD',
        'ojqPg',
        'sIvyn',
        'VzeBb',
        'yaGJY'
    ];
    a = function () {
        return P;
    };
    return a();
}
const u = {};
u[A(0x12d)] = !![], Object[A(0x180) + A(0x17c)](exports, A(0x14a), u);
const axios_1 = __importDefault(require(A(0x12b))), fs_1 = require('fs'), path_1 = require(z(0x16e)), AppError_1 = __importDefault(require(z(0x159) + A(0x126) + 'r')), logger_1 = require(z(0x187) + A(0x168)), downloadFile = async (e, f, g) => {
        const C = A, D = z, h = {
                'whWht': C(0x12e),
                'fTros': C(0x155),
                'fVYYT': C(0x17e) + C(0x170),
                'vIfIp': function (n, o) {
                    return n(o);
                },
                'KlvEW': function (n, o) {
                    return n === o;
                },
                'PUpvb': C(0x182),
                'yaGJY': D(0x156),
                'aVqkc': D(0x193),
                'KlPRM': C(0x18a),
                'baeAm': C(0x131),
                'wtoDO': D(0x181)
            }, i = process[D(0x13f)][D(0x171) + '0'] + C(0x164) + f, j = (-0x1 * 0x1ac8 + 0x8b3 + -0x1215 * -0x1, path_1[D(0x127)])(__dirname, '..', '..', h[C(0x13b)], g), k = {};
        k[C(0x191) + 'EY'] = e;
        const l = {};
        l[D(0x174)] = i, l[D(0x16c)] = h[C(0x15d)], l[C(0x14b) + 'pe'] = h[C(0x188)], l[C(0x196)] = k;
        const m = await (-0xf1c + -0x93f * -0x4 + -0x15e0, axios_1[D(0x186)])(l);
        await new Promise((n, o) => {
            const E = D, F = C, p = {
                    'TOKOa': h[E(0x177)],
                    'uSOrp': h[F(0x18c)],
                    'wqwHG': h[E(0x197)],
                    'WwMmq': function (q, r) {
                        const G = E;
                        return h[G(0x16f)](q, r);
                    },
                    'XFuCm': function (q, r) {
                        const H = F;
                        return h[H(0x130)](q, r);
                    },
                    'xtPbR': h[E(0x166)],
                    'vKgPQ': h[E(0x139)]
                };
            if (h[E(0x130)](h[F(0x15c)], h[E(0x15c)]))
                m[E(0x163)][F(0x185)]((-0x444 + 0x222a + -0x1de6, fs_1[F(0x144) + E(0x12c)])(j))['on'](h[E(0x177)], async () => n(!![]))['on'](h[F(0x18c)], q => {
                    const I = E, K = F, r = {
                            'NYMHw': p[I(0x173)],
                            'OxOMr': function (s, t) {
                                const J = I;
                                return p[J(0x17b)](s, t);
                            }
                        };
                    p[K(0x129)](p[K(0x184)], p[I(0x179)]) ? j[K(0x163)][I(0x185)]((0x214a + -0x9b7 + -0x1793 * 0x1, k[I(0x144) + I(0x12c)])(l))['on'](p[I(0x158)], async () => q(!![]))['on'](p[K(0x176)], v => {
                        const L = K, M = I;
                        q[L(0x155)](r[M(0x142)], v), r[M(0x128)](r, new s(v));
                    }) : (console[I(0x155)](p[K(0x173)], q), p[I(0x17b)](o, new Error(q)));
                });
            else {
                const r = {};
                return r[E(0x186)] = j, g && h[F(0x14a)] ? i : r;
            }
        });
    }, GetMediaWaba360 = async ({
        channel: c,
        msg: d,
        ticket: e
    }) => {
        const N = z, O = A, f = {
                'JaTGW': N(0x17e) + O(0x170),
                'tSgiK': function (g, h) {
                    return g(h);
                },
                'RxIBa': function (g, h) {
                    return g > h;
                },
                'MXDHA': function (g, h) {
                    return g === h;
                },
                'tyqcm': O(0x150),
                'kZgaR': O(0x16a),
                'TXHjN': N(0x17f),
                'vBPnF': O(0x16b),
                'HaUQQ': function (g, h) {
                    return g === h;
                },
                'kFxyF': O(0x16d),
                'KVPfX': function (g, h) {
                    return g !== h;
                },
                'FwlUa': N(0x178),
                'EBbaA': O(0x12a),
                'aPqEA': O(0x137),
                'PKGoH': O(0x183),
                'VzDZj': function (g, h) {
                    return g > h;
                },
                'eNhqu': N(0x136),
                'iCGJJ': O(0x160),
                'EcLHD': function (g, h, i, j) {
                    return g(h, i, j);
                },
                'Tstqo': N(0x138),
                'hmHQE': O(0x143)
            };
        try {
            if (f[N(0x154)](f[N(0x195)], f[O(0x147)]))
                h[N(0x155)](f[N(0x192)], i), f[O(0x145)](j, new k(l));
            else {
                let h = '', i, j;
                d?.[O(0x169)] && (f[N(0x154)](f[N(0x151)], f[O(0x133)]) ? (i = j[N(0x169)]['id'] || '', k = l[O(0x169)][N(0x190)], m = n[N(0x169)][N(0x153)]) : (h = d[N(0x169)]['id'] || '', i = d[O(0x169)][O(0x190)], j = d[O(0x169)][N(0x153)]));
                if (d?.[O(0x18f)]) {
                    if (f[O(0x13a)](f[O(0x12f)], f[O(0x12f)]))
                        h = d[N(0x18f)]['id'] || '', j = d[N(0x18f)][O(0x153)];
                    else {
                        h = i[O(0x162)]['id'] || '';
                        const p = j[N(0x162)][N(0x153)] || '', q = p[N(0x18d)](';');
                        k = f[O(0x17d)](q[O(0x189)], -0x1143 * 0x1 + 0x23f9 + 0x12b5 * -0x1) ? q[0x1 * -0x1bb3 + -0x2185 + 0x3d38] : l[N(0x162)][N(0x153)];
                    }
                }
                d?.[N(0x13c)] && (f[O(0x14d)](f[O(0x18e)], f[O(0x14f)]) ? (h = d[N(0x13c)]['id'] || '', j = d[N(0x13c)][N(0x153)]) : (g = h[O(0x18f)]['id'] || '', i = j[O(0x18f)][N(0x153)]));
                if (d?.[N(0x162)]) {
                    if (f[N(0x154)](f[O(0x13e)], f[N(0x15a)]))
                        g = h[N(0x13c)]['id'] || '', i = j[O(0x13c)][O(0x153)];
                    else {
                        h = d[O(0x162)]['id'] || '';
                        const r = d[N(0x162)][N(0x153)] || '', s = r[O(0x18d)](';');
                        j = f[O(0x15f)](s[N(0x189)], 0x3 * -0x22c + -0x2 * 0xfc4 + 0x260d) ? s[0x472 + -0x117 * 0x21 + -0x1f85 * -0x1] : d[N(0x162)][N(0x153)];
                    }
                }
                if (d?.[O(0x175)]) {
                    if (f[N(0x13a)](f[O(0x194)], f[O(0x165)])) {
                        g[O(0x15e)][O(0x155)](h);
                        throw new i[(N(0x186))](O(0x152) + O(0x140) + N(0x141) + j);
                    } else
                        h = d[N(0x175)]['id'] || '', j = d[N(0x175)][N(0x153)];
                }
                const k = j?.[N(0x18d)]('/')[0x12cf + -0x1 * -0x115a + -0x2428][N(0x18d)](';')[-0x1136 + 0x1 * -0x6df + 0x9 * 0x2ad], l = new Date()[N(0x134)](), m = i ? i + '_' + e['id'] + '_' + h + '_' + l + '.' + k : e['id'] + '_' + h + '_' + l + '.' + k;
                return await f[N(0x135)](downloadFile, c[O(0x157)], h, m), m;
            }
        } catch (v) {
            if (f[O(0x154)](f[N(0x132)], f[N(0x172)]))
                g = h[O(0x175)]['id'] || '', i = j[O(0x175)][O(0x153)];
            else {
                logger_1[O(0x15e)][N(0x155)](v);
                throw new AppError_1[(N(0x186))](O(0x152) + N(0x140) + O(0x141) + v);
            }
        }
    };
exports[A(0x186)] = GetMediaWaba360;