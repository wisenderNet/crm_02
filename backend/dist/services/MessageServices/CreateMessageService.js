'use strict';
const a5 = b, a6 = b;
(function (c, d) {
    const a3 = b, a4 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a3(0x226)) / (-0x1dd7 + -0x83 * 0xe + 0xc56 * 0x3) + -parseInt(a3(0x237)) / (-0x2 * -0xb15 + 0x1838 + 0x38 * -0xd4) + parseInt(a4(0x204)) / (0x21b4 + 0x9cc + 0x2b7d * -0x1) * (-parseInt(a4(0x20c)) / (0xa * -0xfd + -0x1a98 + 0x247e)) + -parseInt(a3(0x1eb)) / (0xb * -0xa6 + 0x1514 + -0xded) + -parseInt(a4(0x1ed)) / (0x23a8 * -0x1 + -0x618 + 0x14e3 * 0x2) + -parseInt(a4(0x1f3)) / (0x1968 + -0xe4f + 0x1a * -0x6d) * (-parseInt(a4(0x1cd)) / (-0x15f * -0x6 + 0x1 * 0x89e + 0x10 * -0x10d)) + parseInt(a4(0x1f1)) / (-0x2385 + -0x63 * -0x51 + -0x1 * -0x43b);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x2b703 + -0x52 * -0x713 + 0x339dd * -0x1));
var __importDefault = this && this[a5(0x21f) + a5(0x20e)] || function (c) {
    const a7 = a5;
    return c && c[a7(0x1fc)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x3 * -0xc1 + -0x1c7c + 0x208c);
        let h = e[f];
        return h;
    }, b(c, d);
}
const o = {};
o[a5(0x22d)] = !![], Object[a6(0x1d4) + a5(0x1d6)](exports, a5(0x1fc), o);
function a() {
    const ac = [
        '4772205gGohdd',
        'riginal\x20nÃ£',
        '55349qFNxWx',
        'PEZAv',
        'editedMess',
        'tenantId',
        'UbmMM',
        'eoUxn',
        'nrLBn',
        'rted',
        'EEIgq',
        '__esModule',
        'ticket',
        'dFhQV',
        'message',
        'payload',
        'vPTvZ',
        'tjGBp',
        'hktjG',
        '633zmfqTr',
        'ixmUd',
        'o\x20encontra',
        'Aahln',
        'contactId',
        'body',
        'FJyBU',
        'Erro\x20ao\x20ex',
        '1588KUIiFy',
        'oorBb',
        'fault',
        'yHcrN',
        'ticketImpo',
        'QsLqn',
        'cRSIb',
        'MrzZT',
        'key',
        'YPGrl',
        'ataJson',
        'ssage',
        'TDFTX',
        'ers/socket',
        'edited',
        'eMfdC',
        'findOne',
        'QDpUF',
        'chat:creat',
        '__importDe',
        'age',
        'jbCYm',
        'DfRld',
        'Mensagem\x20o',
        'gApkw',
        'parse',
        '149347RQRgiw',
        'quotedMsg',
        'QlmCp',
        'sUSPA',
        'CDgGl',
        'yUYkO',
        'gcGRV',
        'value',
        'GSwKT',
        'ZleIO',
        'ls/Contact',
        'NG_MESSAGE',
        'mediaType',
        'mtioL',
        'PNXeb',
        'TorGN',
        'qcylU',
        '358156iGyvxg',
        '../../mode',
        'ERR_CREATI',
        '88xujGZB',
        'where',
        'Qjhgt',
        'create',
        'skVFI',
        'SPnCG',
        'jJSvc',
        'defineProp',
        'dataJson',
        'erty',
        'ls/Ticket',
        'fromMe',
        'type',
        'bucEX',
        'OcbsM',
        'default',
        'ybtHo',
        'aJvEg',
        'jynpG',
        'update',
        'PzpqY',
        'ageId\x20do\x20d',
        'messageId',
        'protocolMe',
        'contact',
        'cYnlX',
        'chat:updat',
        'tHrHc',
        'include',
        '../../help',
        '1142590ewGqvW',
        'Emit',
        '961212lQaRRV',
        'ls/Message',
        'trair\x20mess',
        'model'
    ];
    a = function () {
        return ac;
    };
    return a();
}
const Message_1 = __importDefault(require(a5(0x238) + a5(0x1ee))), Ticket_1 = __importDefault(require(a6(0x238) + a6(0x1d7))), socketEmit_1 = __importDefault(require(a6(0x1ea) + a6(0x219) + a6(0x1ec))), Contact_1 = __importDefault(require(a5(0x238) + a5(0x230)));
function extractMessageId(d) {
    const a8 = a5, a9 = a6, e = {};
    e[a8(0x1f7)] = a9(0x1fd), e[a9(0x1dd)] = a9(0x1e5), e[a8(0x221)] = a9(0x227), e[a9(0x1cf)] = function (g, h) {
        return g !== h;
    }, e[a8(0x213)] = a9(0x20a), e[a8(0x222)] = a8(0x1fb), e[a8(0x21b)] = function (g, h) {
        return g === h;
    }, e[a8(0x1db)] = a9(0x22b), e[a8(0x22f)] = a8(0x234), e[a8(0x1d1)] = a9(0x20b) + a8(0x1ef) + a9(0x1e2) + a9(0x216);
    const f = e;
    try {
        if (f[a9(0x1cf)](f[a9(0x213)], f[a8(0x222)])) {
            const g = JSON[a9(0x225)](d);
            return g[a9(0x1ff)][a8(0x1f5) + a8(0x220)][a9(0x1ff)][a8(0x1e4) + a9(0x217)][a8(0x214)]['id'];
        } else {
            const i = {};
            i[a8(0x1f6)] = k;
            const j = {};
            j[a9(0x1f0)] = j[a9(0x1dc)], j['as'] = f[a8(0x1f7)], j[a8(0x1ce)] = i, j[a9(0x1e9)] = [f[a9(0x1dd)]];
            const k = {};
            k[a8(0x1f0)] = l[a8(0x1dc)], k['as'] = f[a8(0x221)], k[a9(0x1e9)] = [f[a8(0x1dd)]];
            const l = {};
            l['id'] = n[a9(0x208)];
            const m = {};
            m[a8(0x1f0)] = m[a9(0x1dc)], m['as'] = f[a8(0x1dd)], m[a9(0x1ce)] = l, i = [
                j,
                k,
                m
            ];
        }
    } catch (i) {
        if (f[a9(0x21b)](f[a8(0x1db)], f[a8(0x22f)])) {
            const k = e[a9(0x225)](f);
            return k[a9(0x1ff)][a8(0x1f5) + a8(0x220)][a8(0x1ff)][a9(0x1e4) + a9(0x217)][a8(0x214)]['id'];
        } else
            throw new Error(f[a8(0x1d1)]);
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const aa = a6, ab = a5, x = {
            'cYnlX': aa(0x20b) + aa(0x1ef) + aa(0x1e2) + aa(0x216),
            'jynpG': aa(0x21e) + 'e',
            'bucEX': ab(0x223) + aa(0x1f2) + aa(0x206) + 'da',
            'PEZAv': ab(0x1fd),
            'QDpUF': ab(0x1e5),
            'gcGRV': ab(0x227),
            'jJSvc': ab(0x239) + ab(0x231),
            'nrLBn': function (F, G) {
                return F === G;
            },
            'SPnCG': ab(0x1f5) + aa(0x220),
            'tjGBp': ab(0x201),
            'CDgGl': aa(0x203),
            'qcylU': function (F, G) {
                return F(G);
            },
            'gApkw': ab(0x1f8),
            'Aahln': ab(0x20d),
            'yHcrN': ab(0x1e7) + 'e',
            'tHrHc': aa(0x1de),
            'QsLqn': function (F, G) {
                return F !== G;
            },
            'dFhQV': ab(0x233),
            'YPGrl': ab(0x1e1),
            'cRSIb': function (F, G) {
                return F !== G;
            },
            'ixmUd': aa(0x218),
            'sUSPA': ab(0x235),
            'QlmCp': ab(0x22e)
        };
    if (x[aa(0x1f9)](v[ab(0x232)], x[ab(0x1d2)]) && v[aa(0x1d5)]) {
        if (x[aa(0x1f9)](x[ab(0x202)], x[ab(0x22a)]))
            throw new d(x[ab(0x1e6)]);
        else {
            const G = v[ab(0x1d5)], H = x[ab(0x236)](extractMessageId, G), I = {};
            I[ab(0x1e3)] = H, I[ab(0x1f6)] = w;
            const J = {};
            J[aa(0x1ce)] = I;
            const K = await Message_1[ab(0x1dc)][aa(0x21c)](J);
            if (K) {
                if (x[aa(0x1f9)](x[aa(0x224)], x[aa(0x207)])) {
                    const M = {};
                    M[ab(0x1f6)] = y, M[ab(0x1d9)] = x[ab(0x1df)], M[aa(0x200)] = z, (0x21b1 + -0x1037 + -0x117a, f[aa(0x1dc)])(M);
                } else {
                    const M = {};
                    M[ab(0x21a)] = v[ab(0x209)], await K[aa(0x1e0)](M);
                    const N = {};
                    return N[ab(0x1f6)] = w, N[ab(0x1d9)] = x[ab(0x20f)], N[aa(0x200)] = K, (0x2 * 0xc1d + -0x4 * -0x6dc + -0x185 * 0x22, socketEmit_1[aa(0x1dc)])(N), K;
                }
            } else {
                if (x[ab(0x1f9)](x[aa(0x1e8)], x[ab(0x1e8)]))
                    throw new Error(x[aa(0x1da)]);
                else
                    try {
                        const P = i[ab(0x225)](j);
                        return P[aa(0x1ff)][aa(0x1f5) + aa(0x220)][ab(0x1ff)][aa(0x1e4) + aa(0x217)][aa(0x214)]['id'];
                    } catch (Q) {
                        throw new l(x[aa(0x1e6)]);
                    }
            }
        }
    }
    const y = {};
    y[aa(0x1e3)] = v[ab(0x1e3)], y[ab(0x1f6)] = w;
    const z = {};
    z[ab(0x1ce)] = y;
    let A = await Message_1[ab(0x1dc)][aa(0x21c)](z);
    if (!A) {
        if (x[ab(0x211)](x[ab(0x1fe)], x[ab(0x1fe)])) {
            const Q = {};
            return Q[ab(0x1dc)] = j, y && z[aa(0x1fc)] ? Q : Q;
        } else {
            const Q = { ...v };
            Q[ab(0x1f6)] = w, A = await Message_1[ab(0x1dc)][ab(0x1d0)](Q);
        }
    } else {
        if (x[ab(0x1f9)](x[ab(0x215)], x[ab(0x215)]))
            await A[aa(0x1e0)](v);
        else
            throw new d(x[aa(0x1da)]);
    }
    let B;
    if (!v[aa(0x1d8)]) {
        if (x[aa(0x212)](x[ab(0x205)], x[aa(0x229)])) {
            const S = {};
            S[ab(0x1f6)] = w;
            const T = {};
            T[aa(0x1f0)] = Ticket_1[ab(0x1dc)], T['as'] = x[ab(0x1f4)], T[aa(0x1ce)] = S, T[ab(0x1e9)] = [x[aa(0x21d)]];
            const U = {};
            U[ab(0x1f0)] = Message_1[aa(0x1dc)], U['as'] = x[aa(0x22c)], U[ab(0x1e9)] = [x[aa(0x21d)]];
            const V = {};
            V['id'] = v[aa(0x208)];
            const W = {};
            W[aa(0x1f0)] = Contact_1[ab(0x1dc)], W['as'] = x[aa(0x21d)], W[ab(0x1ce)] = V, B = [
                T,
                U,
                W
            ];
        } else {
            const Y = {};
            Y[aa(0x1f6)] = i;
            const Z = {};
            Z[ab(0x1f0)] = z[aa(0x1dc)], Z['as'] = x[ab(0x1f4)], Z[ab(0x1ce)] = Y, Z[ab(0x1e9)] = [x[ab(0x21d)]];
            const a0 = {};
            a0[ab(0x1f0)] = j[aa(0x1dc)], a0['as'] = x[ab(0x22c)], a0[aa(0x1e9)] = [x[ab(0x21d)]], y = [
                Z,
                a0
            ];
        }
    } else {
        if (x[ab(0x1f9)](x[ab(0x228)], x[aa(0x228)])) {
            const Y = {};
            Y[aa(0x1f6)] = w;
            const Z = {};
            Z[aa(0x1f0)] = Ticket_1[ab(0x1dc)], Z['as'] = x[ab(0x1f4)], Z[aa(0x1ce)] = Y, Z[aa(0x1e9)] = [x[ab(0x21d)]];
            const a0 = {};
            a0[ab(0x1f0)] = Message_1[ab(0x1dc)], a0['as'] = x[ab(0x22c)], a0[ab(0x1e9)] = [x[ab(0x21d)]], B = [
                Z,
                a0
            ];
        } else
            throw new d(x[aa(0x1d3)]);
    }
    const C = {};
    C[aa(0x1e3)] = v[aa(0x1e3)], C[aa(0x1f6)] = w;
    const D = {};
    D[aa(0x1ce)] = C, D[ab(0x1e9)] = B;
    const E = await Message_1[aa(0x1dc)][ab(0x21c)](D);
    if (!E)
        throw new Error(x[ab(0x1d3)]);
    if (!v?.[aa(0x210) + aa(0x1fa)]) {
        const a2 = {};
        a2[aa(0x1f6)] = w, a2[aa(0x1d9)] = x[aa(0x1df)], a2[aa(0x200)] = E, (0x1 * 0x1a3d + 0x1819 + -0x3256, socketEmit_1[ab(0x1dc)])(a2);
    }
    return A;
};
exports[a5(0x1dc)] = CreateMessageService;