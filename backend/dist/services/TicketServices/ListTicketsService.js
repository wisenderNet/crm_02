'use strict';
function a() {
    const b3 = [
        'map',
        'profilePic',
        'status',
        'closed',
        'ls/Ticket',
        'NotViewAss',
        'ls/Queue',
        'open',
        'unreadMess',
        'rIRsS',
        'queueId',
        'contact',
        'CriBa',
        'includes',
        'zmNmr',
        'user',
        'umber$',
        'XjLZb',
        'itLpF',
        'messages',
        'SMAHs',
        'kwPxJ',
        'fault',
        'admin',
        '$contact.n',
        'sService',
        '184PFeNrk',
        'ijqnQ',
        'updatedAt',
        'required',
        'body',
        'default',
        '25kWCRcI',
        'body$',
        'pWTJe',
        'erty',
        'length',
        'cxyqN',
        'distinct',
        'OHLeq',
        'rZyBg',
        'TicketsLim',
        '457758CdQYKN',
        '233096aTtNZx',
        'ykihH',
        'profile',
        'itClosed',
        'RBXek',
        'order',
        'rUghQ',
        'bUxEg',
        'RWigs',
        'defineProp',
        'ame$',
        'filter',
        'Irbxh',
        'GILdh',
        'whatsapp',
        'NkTQO',
        'qWzDG',
        'userId',
        '$messages.',
        'iLike',
        'trim',
        'DESC',
        'value',
        'sequelize',
        'name',
        'kMaIj',
        'tickets',
        'hasMore',
        '5896eLaBoL',
        'where',
        'iGHKS',
        'enabled',
        'TbyMh',
        'limit',
        'eues',
        'count',
        '9121284iiJOKh',
        'model',
        'Services/L',
        'ages',
        'QsDRP',
        'LfKHv',
        'isDeleted',
        'znKUH',
        'ufzcU',
        'find',
        'and',
        'key',
        '59213FCHtyg',
        'true',
        'pwaDT',
        'ignedTicke',
        'istSetting',
        'ihHCQ',
        'ls/Whatsap',
        'SLNrZ',
        'rkLoK',
        'number',
        'jBDHp',
        'XbcDa',
        'oQKUx',
        'Url',
        'ckEBu',
        '../Setting',
        '__esModule',
        'TUS_SELECT',
        'zaINP',
        'findAndCou',
        '328437KuyNfK',
        'toLowerCas',
        'gIRiq',
        'mmxXv',
        'muocc',
        'include',
        'ntAll',
        'rs/AppErro',
        'wtVkd',
        'Zhahi',
        '../../erro',
        'ERR_NO_STA',
        '__importDe',
        'LrOZz',
        'ls/Contact',
        'ls/User',
        'gZacD',
        'lZUdZ',
        'tenantId',
        'ls/UsersQu',
        'JKZjx',
        'offset',
        'duplicatin',
        'VryjH',
        'attributes',
        '26710Lnpacx',
        '7802KiRfDL',
        'push',
        '9NnRYoj',
        'YVtwp',
        'ls/Message',
        'cfZkB',
        'QplqF',
        'kFPYb',
        'HtVMi',
        'edYVd',
        'itOpen',
        '../../mode',
        'pending',
        'color',
        'findByPk',
        'queue',
        'isActive',
        'BEHMi',
        'findAll'
    ];
    a = function () {
        return b3;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x164e + -0x305 * 0xa + 0x960);
        let h = e[f];
        return h;
    }, b(c, d);
}
const aY = b, aZ = b;
(function (c, d) {
    const aW = b, aX = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(aW(0x1a4)) / (0x1bd1 + -0x15e4 + 0x17b * -0x4) + parseInt(aX(0x1be)) / (0x3 * -0xe + 0x42f + -0x403) * (parseInt(aX(0x1c0)) / (-0x1 * 0xc28 + 0x24a0 + -0x1875)) + parseInt(aX(0x1fc)) / (-0x2676 + 0x16ea + 0xf90) * (parseInt(aX(0x1f1)) / (0x276 * 0x1 + -0xef8 * -0x1 + -0x1169)) + -parseInt(aW(0x1fb)) / (0x23a0 + -0x17bf + -0xbdb) + parseInt(aX(0x190)) / (0x14 * -0xad + 0x226 + 0xb65) * (-parseInt(aW(0x1eb)) / (0xe11 + -0xb * -0x17f + 0x1e7e * -0x1)) + -parseInt(aW(0x184)) / (-0x871 + 0x9d1 + 0x1 * -0x157) + -parseInt(aX(0x1bd)) / (-0x252f + -0x1efe + 0x3 * 0x16bd) * (-parseInt(aX(0x17c)) / (-0x1cbd + -0x244b + -0x3 * -0x15b1));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xe78f + 0x4126 * 0x23 + 0x3e1b5 * 0x1));
var __importDefault = this && this[aY(0x1b0) + aZ(0x1e7)] || function (c) {
    const b0 = aZ;
    return c && c[b0(0x1a0)] ? c : { 'default': c };
};
const y = {};
y[aY(0x212)] = !![], Object[aY(0x205) + aY(0x1f4)](exports, aY(0x1a0), y);
const sequelize_1 = require(aY(0x213)), Ticket_1 = __importDefault(require(aZ(0x1c9) + aY(0x1d5))), User_1 = __importDefault(require(aZ(0x1c9) + aY(0x1b3))), Queue_1 = __importDefault(require(aZ(0x1c9) + aZ(0x1d7))), Whatsapp_1 = __importDefault(require(aZ(0x1c9) + aY(0x196) + 'p')), Contact_1 = __importDefault(require(aY(0x1c9) + aZ(0x1b2))), UsersQueues_1 = __importDefault(require(aY(0x1c9) + aZ(0x1b7) + aY(0x182))), ListSettingsService_1 = __importDefault(require(aY(0x19f) + aZ(0x186) + aZ(0x194) + aZ(0x1ea))), AppError_1 = __importDefault(require(aY(0x1ae) + aY(0x1ab) + 'r')), Message_1 = __importDefault(require(aY(0x1c9) + aZ(0x1c2))), ListTicketsService = async ({
        searchParam: searchParam = '',
        pageNumber: pageNumber = '1',
        status: I,
        date: J,
        showAll: K,
        userId: L,
        withUnreadMessages: M,
        queuesIds: N,
        isNotAssignedUser: O,
        includeNotQueueDefined: P,
        tenantId: Q,
        profile: R
    }) => {
        const b1 = aZ, b2 = aY, S = {
                'OHLeq': b1(0x1af) + b1(0x1a1) + 'ED',
                'YVtwp': b2(0x1d8),
                'JKZjx': b1(0x1ca),
                'pwaDT': b1(0x1d4),
                'ijqnQ': b1(0x1e4),
                'NkTQO': b1(0x1ef),
                'SMAHs': function (aC, aD) {
                    return aC === aD;
                },
                'XjLZb': b1(0x191),
                'gZacD': b2(0x1e8),
                'VryjH': function (aC, aD) {
                    return aC === aD;
                },
                'BEHMi': function (aC, aD) {
                    return aC === aD;
                },
                'znKUH': function (aC, aD) {
                    return aC === aD;
                },
                'XbcDa': b1(0x17f),
                'LfKHv': function (aC, aD) {
                    return aC && aD;
                },
                'LrOZz': b1(0x197),
                'qWzDG': function (aC, aD) {
                    return aC !== aD;
                },
                'itLpF': b1(0x19c),
                'Zhahi': b2(0x1a7),
                'gIRiq': b2(0x209),
                'rkLoK': b1(0x1cd),
                'edYVd': function (aC, aD) {
                    return aC === aD;
                },
                'lZUdZ': b1(0x1c5),
                'cxyqN': function (aC, aD) {
                    return aC > aD;
                },
                'QplqF': function (aC, aD) {
                    return aC === aD;
                },
                'wtVkd': b2(0x180),
                'bUxEg': function (aC, aD) {
                    return aC === aD;
                },
                'kMaIj': b2(0x1df),
                'HtVMi': function (aC, aD) {
                    return aC(aD);
                },
                'ckEBu': function (aC, aD) {
                    return aC * aD;
                },
                'kwPxJ': function (aC, aD) {
                    return aC - aD;
                },
                'Irbxh': function (aC, aD, aE) {
                    return aC(aD, aE);
                },
                'RBXek': function (aC, aD) {
                    return aC === aD;
                },
                'iGHKS': function (aC, aD) {
                    return aC !== aD;
                },
                'QsDRP': b1(0x1f3),
                'CriBa': b1(0x20a),
                'muocc': b1(0x214),
                'ykihH': b2(0x18a),
                'cfZkB': b1(0x1cb),
                'RWigs': b2(0x1dc),
                'ufzcU': b2(0x1d2) + b2(0x19d),
                'ihHCQ': b2(0x199),
                'rUghQ': b2(0x1e0),
                'rZyBg': b1(0x1ed),
                'rIRsS': b2(0x211),
                'zaINP': function (aC, aD) {
                    return aC + aD;
                },
                'jBDHp': function (aC, aD) {
                    return aC > aD;
                }
            }, T = S[b1(0x1e5)](K, S[b2(0x1e2)]) && S[b1(0x1e5)](R, S[b2(0x1b4)]), U = S[b2(0x1bb)](M, S[b2(0x1e2)]) ? 'S' : 'N', V = S[b1(0x1cf)](O, S[b2(0x1e2)]) ? 'S' : 'N', W = await (-0x7e1 * 0x1 + 0x1cd2 + -0x14f1, ListSettingsService_1[b1(0x1f0)])(Q), X = S[b2(0x18b)](W?.[b2(0x18d)](aC => aC[b2(0x18f)] === b2(0x1d6) + b2(0x193) + 'ts')?.[b2(0x212)], S[b1(0x19b)]) ? 'S' : 'N';
        if (S[b2(0x189)](!I, !T)) {
            if (S[b1(0x18b)](S[b1(0x1b1)], S[b2(0x1b1)]))
                throw new AppError_1[(b1(0x1f0))](S[b1(0x1f8)], 0xb6b + 0x21b7 + -0x2b8e);
            else
                throw new d[(b1(0x1f0))](S[b1(0x1f8)], -0x73e + 0x1471 + -0xb9f);
        }
        if (T) {
            if (S[b1(0x20c)](S[b2(0x1e3)], S[b2(0x1e3)])) {
                const aE = {};
                aE[b2(0x20d)] = q;
                const aF = { [r['Op']['in']]: ag }, aG = {};
                aG[b1(0x1d3)] = aF;
                const aH = { ...ah }, aI = {
                        [p['Op'][b2(0x18e)]]: [
                            aE,
                            aG,
                            aH
                        ]
                    }, aJ = {};
                aJ[b2(0x20d)] = null;
                const aK = { [aj['Op']['in']]: ak }, aL = {};
                aL[b1(0x1d3)] = aK;
                const aM = { ...al }, aN = {
                        [ai['Op'][b2(0x18e)]]: [
                            aJ,
                            aL,
                            aM
                        ]
                    }, aO = {
                        [o['Op']['or']]: [
                            aI,
                            aN
                        ]
                    };
                n = aO;
            } else
                I = [
                    S[b1(0x1c1)],
                    S[b2(0x1b8)],
                    S[b2(0x192)]
                ];
        }
        const Y = await User_1[b2(0x1f0)][b2(0x1cc)](L);
        let Z = [];
        if (S[b1(0x1e5)](Y[b1(0x1fe)], S[b2(0x1b4)])) {
            if (S[b2(0x1cf)](S[b1(0x1ad)], S[b2(0x1a6)]))
                d = [
                    S[b2(0x1c1)],
                    S[b2(0x1b8)],
                    S[b1(0x192)]
                ];
            else {
                const aF = {};
                aF[b2(0x1b6)] = Q, aF[b1(0x1ce)] = !![];
                const aG = {};
                aG[b1(0x17d)] = aF, aG[b2(0x1bc)] = [
                    'id',
                    S[b2(0x198)]
                ], Z = await Queue_1[b2(0x1f0)][b1(0x1d0)](aG);
            }
        } else {
            if (S[b2(0x1c7)](S[b1(0x1b5)], S[b1(0x1b5)])) {
                const aH = {};
                aH[b2(0x20d)] = L;
                const aI = {};
                aI[b2(0x17d)] = aH, Z = await UsersQueues_1[b1(0x1f0)][b2(0x1d0)](aI);
            } else {
                const aK = {};
                return aK[b2(0x1f0)] = ab, aK && a9[b1(0x1a0)] ? aa : aK;
            }
        }
        let a0 = Z[b1(0x1d1)](aK => aK[b2(0x1db)] || aK['id']);
        N && S[b2(0x1f6)](N[b1(0x1f5)], -0xc2f + 0x12ab + -0x67c) && (S[b2(0x1c4)](S[b2(0x1ac)], S[b2(0x1ac)]) ? a0 = a0[b2(0x207)](aK => N[b1(0x1de)](String(aK))) : a8 = a9[b1(0x207)](aL => ac[b2(0x1de)](ad(aL))));
        if (S[b2(0x203)](a0[b1(0x1f5)], -0x9de + 0x1f7d + 0x735 * -0x3)) {
            if (S[b2(0x20c)](S[b2(0x215)], S[b2(0x215)])) {
                const aM = aS[b1(0x1a5) + 'e']()[b2(0x210)](), aN = { [aV['Op'][b2(0x20f)]]: '%' + aM + '%' }, aO = {};
                aO[b1(0x1e9) + b1(0x206)] = aN;
                const aP = { [p['Op'][b2(0x20f)]]: '%' + aM + '%' }, aQ = {};
                aQ[b1(0x1e9) + b2(0x1e1)] = aP;
                const aR = { [q['Op'][b2(0x20f)]]: '%' + aM + '%' }, aS = {};
                aS[b1(0x20e) + b2(0x1f2)] = aR, aT[aU['Op']['or']] = [
                    aO,
                    aQ,
                    aS
                ];
                const aT = { [ah['Op'][b2(0x20f)]]: '%' + aM + '%' }, aU = {};
                aU[b1(0x1ef)] = aT;
                const aV = {};
                aV[b1(0x185)] = ag[b1(0x1f0)], aV['as'] = S[b2(0x1ec)], aV[b2(0x1bc)] = [
                    'id',
                    S[b1(0x20b)]
                ], aV[b1(0x17d)] = aU, aV[b1(0x1ee)] = ![], aV[b1(0x1ba) + 'g'] = ![], r[b1(0x1bf)](aV);
            } else
                a0 = [0x67 * 0x61 + -0x6a0 + -0x2067];
        }
        const a1 = W[b1(0x18d)](aM => aM[b2(0x18f)] === b1(0x1fa) + b2(0x1c8))?.[b1(0x212)] || '30', a2 = W[b2(0x18d)](aM => aM[b2(0x18f)] === b2(0x1fa) + b1(0x1ff))?.[b1(0x212)] || '30', a3 = S[b2(0x1c6)](Number, a1), a4 = S[b2(0x1c6)](Number, a2), a5 = S[b2(0x19e)](a4, S[b2(0x1e6)](S[b1(0x208)](parseInt, pageNumber, -0x13 * 0xf9 + 0x1ac2 + 0x3 * -0x2bf), -0x2283 + -0x52 * 0x5d + 0x2 * 0x2027)), a6 = S[b1(0x19e)](a3, S[b2(0x1e6)](S[b2(0x208)](parseInt, pageNumber, 0x73 * 0x37 + -0x9 * 0x335 + -0x3 * -0x166), 0x33d * -0x2 + -0x368 + 0x1 * 0x9e3));
        let a7 = [];
        const a8 = { [sequelize_1['Op']['in']]: I }, a9 = {};
        a9[b1(0x1d3)] = a8;
        const aa = { [sequelize_1['Op']['in']]: a0 }, ab = {};
        ab[b1(0x1db)] = aa;
        const ac = { [sequelize_1['Op']['gt']]: -0x2c8 + -0xf * -0x287 + -0x2321 }, ad = {};
        ad[b2(0x1d9) + b2(0x187)] = ac;
        const ae = {};
        ae[b1(0x20d)] = null;
        let af = {
            'tenantId': Q,
            ...T ? {} : a9,
            ...T ? {} : ab,
            ...T ? {} : S[b1(0x200)](U, 'S') && ad,
            ...T ? {} : S[b2(0x1cf)](V, 'S') && ae
        };
        if (searchParam) {
            if (S[b1(0x17e)](S[b2(0x188)], S[b2(0x188)]))
                d = [-0x2 * -0x375 + 0x10a3 * 0x1 + -0x178d];
            else {
                const aN = searchParam[b1(0x1a5) + 'e']()[b1(0x210)]();
                af[sequelize_1['Op']['or']] = [
                    { '$contact.name$': { [sequelize_1['Op'][b1(0x20f)]]: '%' + aN + '%' } },
                    { '$contact.number$': { [sequelize_1['Op'][b1(0x20f)]]: '%' + aN + '%' } },
                    { '$messages.body$': { [sequelize_1['Op'][b2(0x20f)]]: '%' + aN + '%' } }
                ];
                const aO = { [sequelize_1['Op'][b1(0x20f)]]: '%' + aN + '%' }, aP = {};
                aP[b2(0x1ef)] = aO;
                const aQ = {};
                aQ[b1(0x185)] = Message_1[b2(0x1f0)], aQ['as'] = S[b1(0x1ec)], aQ[b2(0x1bc)] = [
                    'id',
                    S[b1(0x20b)]
                ], aQ[b1(0x17d)] = aP, aQ[b1(0x1ee)] = ![], aQ[b2(0x1ba) + 'g'] = ![], a7[b1(0x1bf)](aQ);
            }
        }
        if (S[b2(0x200)](X, 'S') && !T) {
            const aR = {};
            aR[b1(0x20d)] = L;
            const aS = {};
            aS[b2(0x20d)] = null, af = {
                [sequelize_1['Op']['or']]: [
                    {
                        [sequelize_1['Op'][b1(0x18e)]]: [
                            aR,
                            { 'status': { [sequelize_1['Op']['in']]: I } },
                            { ...af }
                        ]
                    },
                    {
                        [sequelize_1['Op'][b1(0x18e)]]: [
                            aS,
                            { 'status': { [sequelize_1['Op']['in']]: I } },
                            { ...af }
                        ]
                    }
                ]
            };
        }
        const ag = {
                [sequelize_1['Op']['in']]: [
                    S[b1(0x1c1)],
                    S[b2(0x1b8)]
                ]
            }, ah = { ...af };
        ah[b2(0x1d3)] = ag;
        const ai = {};
        ai[b2(0x185)] = Whatsapp_1[b2(0x1f0)], ai['as'] = S[b1(0x1dd)], ai[b1(0x1bc)] = [
            'id',
            S[b2(0x1a8)],
            S[b1(0x1fd)],
            S[b1(0x1c3)]
        ];
        const aj = {};
        aj[b2(0x185)] = Contact_1[b2(0x1f0)], aj['as'] = S[b2(0x204)], aj[b2(0x1bc)] = [
            S[b2(0x1a8)],
            S[b1(0x18c)],
            S[b1(0x195)]
        ];
        const ak = {};
        ak[b1(0x185)] = User_1[b1(0x1f0)], ak['as'] = S[b1(0x202)], ak[b2(0x1bc)] = [S[b2(0x1a8)]];
        const al = {};
        al[b2(0x185)] = Queue_1[b2(0x1f0)], al['as'] = S[b2(0x198)], al[b2(0x1bc)] = [
            'id',
            S[b2(0x198)],
            S[b1(0x1c3)]
        ];
        const am = {};
        am[b2(0x17d)] = ah, am[b2(0x1a9)] = [
            ...a7,
            ai,
            aj,
            ak,
            al
        ], am[b1(0x1f7)] = !![], am[b2(0x181)] = a3, am[b2(0x1b9)] = a6, am[b1(0x201)] = [[
                S[b1(0x1f9)],
                S[b2(0x1da)]
            ]];
        const {
                rows: an,
                count: ao
            } = await Ticket_1[b1(0x1f0)][b1(0x1a3) + b2(0x1aa)](am), ap = { [sequelize_1['Op']['in']]: [S[b2(0x192)]] }, aq = { ...af };
        aq[b2(0x1d3)] = ap;
        const ar = {};
        ar[b2(0x185)] = Whatsapp_1[b1(0x1f0)], ar['as'] = S[b1(0x1dd)], ar[b1(0x1bc)] = [
            'id',
            S[b2(0x1a8)],
            S[b2(0x1fd)],
            S[b1(0x1c3)]
        ];
        const as = {};
        as[b1(0x185)] = Contact_1[b2(0x1f0)], as['as'] = S[b1(0x204)], as[b1(0x1bc)] = [
            S[b2(0x1a8)],
            S[b2(0x18c)],
            S[b1(0x195)]
        ];
        const at = {};
        at[b1(0x185)] = User_1[b2(0x1f0)], at['as'] = S[b2(0x202)], at[b1(0x1bc)] = [S[b2(0x1a8)]];
        const au = {};
        au[b1(0x185)] = Queue_1[b1(0x1f0)], au['as'] = S[b2(0x198)], au[b1(0x1bc)] = [
            'id',
            S[b2(0x198)],
            S[b2(0x1c3)]
        ];
        const av = {};
        av[b1(0x17d)] = aq, av[b1(0x1a9)] = [
            ...a7,
            ar,
            as,
            at,
            au
        ], av[b1(0x1f7)] = !![], av[b2(0x181)] = a4, av[b2(0x1b9)] = a5, av[b1(0x201)] = [[
                S[b2(0x1f9)],
                S[b2(0x1da)]
            ]];
        const {
                rows: aw,
                count: ax
            } = await Ticket_1[b1(0x1f0)][b1(0x1a3) + b1(0x1aa)](av), ay = [
                ...an,
                ...aw
            ], az = S[b2(0x1a2)](ao, ax), aA = S[b1(0x19a)](az, S[b2(0x1a2)](a5, aw[b2(0x1f5)])), aB = {};
        return aB[b2(0x216)] = ay || [], aB[b1(0x183)] = az, aB[b1(0x217)] = aA, aB;
    };
exports[aY(0x1f0)] = ListTicketsService;