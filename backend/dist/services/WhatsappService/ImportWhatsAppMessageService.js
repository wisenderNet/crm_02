'use strict';
function a() {
    const J = [
        'RnEYs',
        'ers/addLog',
        'DD/MM/YYYY',
        'ls/Ticket',
        'sort',
        '../../libs',
        '\x0a\x20\x20\x20\x20Criaç',
        '\x20conexão\x20p',
        '6488508dIxObu',
        'whatsapps',
        'floor',
        'closedTick',
        'erty',
        'ionado\x20Dat',
        'ortMessage',
        'default',
        'update',
        'Service',
        'findByPk',
        'ação\x20de\x20me',
        'hours',
        'dateTicket',
        'HrvDY',
        'Aguardando',
        '../../erro',
        'name',
        '/wbot',
        'DGjTC',
        'has',
        '\x20HH:mm:ss',
        'sQHTA',
        'push',
        'o\x20de\x20impor',
        'kets',
        'SSAGE_TO_I',
        'value',
        'rtMessages',
        'oAtfR',
        '667769OypGLO',
        'messageTim',
        'wDZiw',
        's:\x20',
        '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20',
        'ageBaileys',
        '\x20\x0a\x20\x20\x20\x20Sele',
        'nsagens:\x0a\x20',
        'processImp',
        'app\x20Id:\x20',
        'XVkyG',
        'renderButt',
        'ttlZP',
        'rEOAy',
        'orted',
        '\x0a\x20\x20\x20\x20Whats',
        '../TicketS',
        'llSrE',
        '130595fmWiDz',
        '\x0a\x20\x20\x20\x20Selec',
        'a\x20importaç',
        'ticketData',
        'p\x20nome:\x20',
        'ão:\x20',
        '\x20\x0a\x20\x20\x20\x20',
        'bnVwM',
        'rBxSd',
        'addLogs',
        'gAqWv',
        'date-fns',
        'WGZUJ',
        '__importDe',
        '16zgutaP',
        'sAdbo',
        'nMHaB',
        'rfEbP',
        'ivo\x20de\x20log',
        'findAll',
        'Ylhdy',
        'sWppId',
        'tsImported',
        'ls/Whatsap',
        'HoneR',
        'WtjVU',
        'EwknF',
        'wwFFn',
        'closed',
        '__esModule',
        'YRouI',
        'tenantId',
        '\x20\x20\x20Whatsap',
        'NDONT',
        '1303689TUbUfS',
        'set',
        'DHybn',
        '../../mode',
        'ntMessages',
        'umZwh',
        'MessageLis',
        'DOyck',
        'ão\x20do\x20arqu',
        'fault',
        'tener',
        'hQQdQ',
        'VxwbL',
        'importRece',
        'ERR_NOT_ME',
        'NBWrk',
        'yZRAx',
        'rs/AppErro',
        '\x20\x20\x20\x20\x20',
        '22165390XRZyqt',
        'cionado\x20Da',
        'status',
        '11002104mpRRed',
        'onCloseTic',
        'MPORT',
        'PElFv',
        'eJQdW',
        '426UnXHdf',
        '2pTGHWK',
        'estamp',
        'importOldM',
        'tação:\x20',
        'VxDUW',
        'format',
        'ta\x20final\x20d',
        'add',
        '1345008QWjhKO',
        'DJuLP',
        'Qzxes',
        'r\x20a\x20import',
        'getTime',
        'closeTicke',
        'key',
        'handleMess',
        'CKTif',
        'sequelize',
        'moment',
        'vices/wbot',
        '\x0aMensagem\x20',
        'etsPostImp',
        'oIotV',
        'ara\x20inicia',
        'a\x20de\x20inici',
        'jQmoq',
        'ticketId',
        'defineProp',
        'essages',
        '\x20de\x20',
        'statusImpo',
        '.txt',
        'DpGzV',
        'length',
        '../../help',
        'Kxokd',
        'pending',
        '../WbotSer',
        'ervices/Up',
        'getWbot',
        'utntl',
        'FMyVm',
        'owutp',
        'SkEJK',
        'low',
        'dataMessag'
    ];
    a = function () {
        return J;
    };
    return a();
}
const y = b, z = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x2423 * -0x1 + 0x255a + -0xe * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const w = b, x = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(w(0x1af)) / (0x22 * -0x8b + 0x1 * 0x1537 + -0x2c0) + -parseInt(w(0x15b)) / (-0x1f2a + -0x2f * -0x76 + 0x982) * (parseInt(x(0x1e3)) / (-0x32 * 0x4a + -0x1f55 * 0x1 + -0x2dcc * -0x1)) + parseInt(x(0x191)) / (-0x2 * 0x87e + 0xdcc * -0x1 + 0x1ecc) + -parseInt(w(0x1c1)) / (-0x24eb + 0x1 * 0x1ff6 + -0x27d * -0x2) * (-parseInt(w(0x15a)) / (0x10a9 + 0x15af + -0x2652)) + -parseInt(w(0x163)) / (-0x49 * 0x59 + 0x23f9 + 0x5 * -0x21d) * (parseInt(x(0x1cf)) / (0x1fe7 + 0x1149 + 0x1a * -0x1e4)) + parseInt(w(0x155)) / (-0x136b + 0x5ed + -0x1 * -0xd87) + -parseInt(w(0x152)) / (-0x1 * 0x1b7c + 0x16db + 0x4ab);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x3af54 + -0x1 * 0x9e3c5 + 0xe629d * 0x2));
var __importDefault = this && this[y(0x1ce) + y(0x148)] || function (c) {
    const A = y;
    return c && c[A(0x1de)] ? c : { 'default': c };
};
const q = {};
q[z(0x1ac)] = !![], Object[z(0x176) + z(0x195)](exports, z(0x1de), q), exports[y(0x168) + y(0x1d7)] = void (0x1996 + 0xc * -0x135 + -0xb1a);
const AppError_1 = __importDefault(require(y(0x1a1) + z(0x150) + 'r')), Whatsapp_1 = __importDefault(require(y(0x1e6) + z(0x1d8) + 'p')), Ticket_1 = __importDefault(require(y(0x1e6) + y(0x18c))), sequelize_1 = require(z(0x16c)), date_fns_1 = require(y(0x1cc)), UpdateTicketService_1 = __importDefault(require(y(0x1bf) + z(0x181) + z(0x19e) + z(0x19a))), wbot_1 = require(y(0x18e) + z(0x1a3)), wbotMessageListener_1 = require(y(0x180) + y(0x16e) + y(0x145) + y(0x149)), moment_1 = __importDefault(require(z(0x16d))), addLogs_1 = require(y(0x17d) + y(0x18a) + 's'), closeTicketsImported = async h => {
        const B = y, C = y, i = {};
        i[B(0x1c8)] = C(0x169), i[B(0x1a4)] = C(0x17f), i[B(0x146)] = function (o, p) {
            return o !== p;
        }, i[B(0x14a)] = B(0x14b), i[C(0x17e)] = C(0x1dd);
        const j = i, k = {};
        k[B(0x19d)] = +(-0xab0 + 0x3f5 * 0x5 + -0x48a * 0x2);
        const l = await Ticket_1[C(0x198)][C(0x1d4)]({
            'where': {
                'status': j[B(0x1a4)],
                'whatsappId': h,
                'imported': { [sequelize_1['Op']['lt']]: +(-0x837 * -0x3 + -0x3b * 0x76 + -0x1 * -0x28d, date_fns_1[B(0x162)])(new Date(), k) }
            }
        });
        for (const o of l) {
            if (j[B(0x146)](j[C(0x14a)], j[C(0x14a)])) {
                const r = h[j[B(0x1c8)]]['id'];
                !i[C(0x1a5)](r) && (m[B(0x1e4)](r, !![]), n[B(0x1a8)](o));
            } else {
                await new Promise(t => setTimeout(t, -0x1849 + 0x1277 * 0x1 + 0x16c * 0x5));
                const r = {};
                r[B(0x154)] = j[B(0x17e)], r[B(0x1e0)] = o[C(0x1e0)];
                const s = {};
                s[C(0x1c4)] = r, s[B(0x175)] = o['id'], await (-0x5a * 0x62 + -0x9 * 0x3b2 + 0x1b * 0x282, UpdateTicketService_1[B(0x198)])(s);
            }
        }
        let m = await Whatsapp_1[C(0x198)][B(0x19b)](h);
        const n = {};
        n[B(0x179) + C(0x1ad)] = null, m[C(0x199)](n);
    };
exports[z(0x168) + z(0x1d7)] = closeTicketsImported;
function sortByMessageTimestamp(d, e) {
    const D = z, E = y, f = {};
    f[D(0x1d0)] = function (h, i) {
        return h - i;
    };
    const g = f;
    return g[E(0x1d0)](e[D(0x1b0) + E(0x15c)], d[E(0x1b0) + E(0x15c)]);
}
function cleaner(d) {
    const F = z, G = y, e = {};
    e[F(0x1b1)] = function (i, j) {
        return i * j;
    }, e[F(0x1d5)] = F(0x187), e[G(0x1d9)] = function (i, j) {
        return i === j;
    }, e[G(0x1bc)] = F(0x14f), e[F(0x1e5)] = G(0x169), e[F(0x1dc)] = function (i, j) {
        return i !== j;
    }, e[G(0x14e)] = F(0x1df), e[F(0x1cd)] = F(0x174);
    const f = e, g = new Map(), h = [];
    for (const i of d) {
        if (f[G(0x1d9)](f[G(0x1bc)], f[F(0x1bc)])) {
            const j = i[f[G(0x1e5)]]['id'];
            !g[G(0x1a5)](j) && (f[G(0x1dc)](f[G(0x14e)], f[G(0x1cd)]) ? (g[G(0x1e4)](j, !![]), h[G(0x1a8)](i)) : (g[F(0x1e4)](h, !![]), i[G(0x1a8)](j)));
        } else {
            const m = e[G(0x193)](f[G(0x1b1)](f[F(0x1b0) + F(0x15c)][f[G(0x1d5)]], 0x4f * 0x79 + -0x107 + 0x88 * -0x3d));
        }
    }
    return h[G(0x18d)](sortByMessageTimestamp);
}
const ImportWhatsAppMessageService = async c => {
    const H = z, I = y, d = {
            'utntl': function (g, h) {
                return g - h;
            },
            'NDONT': H(0x14d) + H(0x1ab) + H(0x157),
            'DJuLP': I(0x169),
            'VxDUW': function (g, h) {
                return g(h);
            },
            'eJQdW': I(0x18b) + I(0x1a6),
            'oIotV': function (g, h) {
                return g < h;
            },
            'FMyVm': function (g, h) {
                return g !== h;
            },
            'CKTif': I(0x1da),
            'rfEbP': function (g, h) {
                return g + h;
            },
            'XVkyG': function (g, h) {
                return g === h;
            },
            'owutp': function (g, h) {
                return g % h;
            },
            'gAqWv': function (g, h) {
                return g === h;
            },
            'oAtfR': I(0x1db),
            'PElFv': H(0x1c0),
            'rBxSd': function (g, h) {
                return g * h;
            },
            'SkEJK': H(0x187),
            'sQHTA': H(0x189),
            'ttlZP': I(0x17b),
            'HrvDY': H(0x1d1),
            'Qzxes': I(0x1ba) + I(0x156) + H(0x1aa),
            'umZwh': H(0x192)
        };
    let e = await Whatsapp_1[H(0x198)][I(0x19b)](c);
    const f = (0x1798 + -0x77b * 0x3 + 0x5 * -0x3b, wbot_1[I(0x182)])(e['id']);
    try {
        const g = d[H(0x15f)](cleaner, wbot_1[H(0x188) + 'es'][c]);
        let h = new Date(e[I(0x15d) + I(0x177)])[H(0x167)](), j = new Date(e[H(0x14c) + H(0x1e7)])[I(0x167)]();
        (-0x1 * 0x5ae + -0x1 * 0x18d7 + 0x1e85, addLogs_1[I(0x1ca)])({
            'fileName': H(0x1b7) + I(0x197) + I(0x1d6) + c + H(0x17a),
            'forceNewFile': !![],
            'text': H(0x1a0) + I(0x190) + I(0x172) + H(0x166) + I(0x19c) + I(0x1b6) + H(0x1e1) + I(0x1c5) + e[I(0x1a2)] + (I(0x1be) + H(0x1b8)) + e['id'] + (I(0x18f) + H(0x147) + H(0x1d3) + H(0x1b2)) + (0x5df * 0x1 + -0x24fb * 0x1 + -0xb5 * -0x2c, moment_1[I(0x198)])()[I(0x160)](d[I(0x159)]) + (H(0x1c2) + H(0x196) + H(0x173) + I(0x1a9) + I(0x15e)) + (0xad9 + -0x24e0 + -0x1 * -0x1a07, moment_1[I(0x198)])(h)[H(0x160)](d[I(0x159)]) + (I(0x1b5) + I(0x153) + H(0x161) + H(0x1c3) + H(0x1c6)) + (0xa44 + 0x1d2a + -0x276e, moment_1[H(0x198)])(j)[H(0x160)](d[H(0x159)]) + I(0x1c7)
        });
        const k = g[H(0x17c)];
        let l = 0x256 + -0x1e29 + 0x1 * 0x1bd3;
        while (d[H(0x171)](l, k)) {
            try {
                if (d[I(0x184)](d[I(0x16b)], d[I(0x16b)]))
                    return d[I(0x183)](e[I(0x1b0) + H(0x15c)], f[I(0x1b0) + H(0x15c)]);
                else {
                    const n = g[l];
                    (0x267d + -0x21c4 * 0x1 + -0x4b9, addLogs_1[I(0x1ca)])({
                        'fileName': I(0x1b7) + H(0x197) + I(0x1d6) + c + H(0x17a),
                        'text': I(0x16f) + d[I(0x1d2)](l, -0x1 * 0x21e9 + 0x138 * 0x3 + -0x1e42 * -0x1) + I(0x178) + k + (H(0x1b3) + I(0x151))
                    }), await (0xa1 * 0x1 + -0x20d4 + 0x2033, wbotMessageListener_1[I(0x16a) + H(0x1b4)])(f, n, e[I(0x1e0)], !![]);
                    if (d[H(0x1b9)](d[H(0x185)](l, -0x1 * -0x21e6 + -0x103f * -0x1 + -0x3223), -0x117e + -0x6d1 * -0x5 + 0x1f * -0x89)) {
                        if (d[H(0x1cb)](d[H(0x1ae)], d[H(0x158)]))
                            throw new d[(H(0x198))](d[H(0x1e2)], 0x74e + -0xd5c + 0x1 * 0x7a1);
                        else {
                            const p = Math[I(0x193)](d[H(0x1c9)](n[H(0x1b0) + H(0x15c)][d[H(0x186)]], -0x224f * 0x1 + 0x2 * 0x14f + 0x2bd * 0xd));
                        }
                    }
                    if (d[I(0x1cb)](d[H(0x1d2)](l, 0x181d + -0x1 * -0x23f1 + 0x3c0d * -0x1), k)) {
                        if (d[H(0x1b9)](d[H(0x1a7)], d[H(0x1a7)])) {
                            wbot_1[I(0x188) + 'es'][c] = [];
                            if (e[I(0x194) + I(0x170) + H(0x1bd)]) {
                                if (d[I(0x184)](d[H(0x1bb)], d[H(0x19f)]))
                                    await (-0x9 * 0x22c + 0x231a * 0x1 + 0x2 * -0x7c7, exports[H(0x168) + I(0x1d7)])(c);
                                else {
                                    const s = new f(), t = [];
                                    for (const u of l) {
                                        const v = u[d[I(0x164)]]['id'];
                                        !s[I(0x1a5)](v) && (s[I(0x1e4)](v, !![]), t[I(0x1a8)](u));
                                    }
                                    return t[H(0x18d)](h);
                                }
                            }
                            await e[I(0x199)]({
                                'statusImportMessages': e[H(0x194) + I(0x170) + I(0x1bd)] ? null : d[I(0x165)],
                                'importOldMessages': null,
                                'importmessages': ![],
                                'importRecentMessages': null
                            });
                        } else {
                            const t = {};
                            return t[I(0x198)] = j, g && h[I(0x1de)] ? l : t;
                        }
                    }
                }
            } catch (t) {
            }
            l++;
        }
    } catch (u) {
        throw new AppError_1[(I(0x198))](d[H(0x1e2)], 0x22a8 + -0x26a4 * 0x1 + 0x58f);
    }
    return d[I(0x1e8)];
};
exports[y(0x198)] = ImportWhatsAppMessageService;