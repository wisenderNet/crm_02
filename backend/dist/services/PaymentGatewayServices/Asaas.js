'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1 * -0xc8c + -0x66b + -0x1 * -0x1463);
        let h = e[f];
        return h;
    }, b(c, d);
}
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(F(0x1ff)) / (0x1530 + -0xf09 + 0x313 * -0x2) * (-parseInt(F(0x178)) / (-0x26 * -0x2 + -0x25d7 + -0x258d * -0x1)) + parseInt(G(0x1c1)) / (0x1 * -0x20c5 + 0x80b * 0x2 + 0x10b2) * (-parseInt(G(0x1f9)) / (0x3 * -0xc06 + 0x15d9 + 0xe3d)) + -parseInt(G(0x1be)) / (0x295 + -0x635 * 0x2 + 0x9da) * (-parseInt(G(0x1b7)) / (0xd9f * 0x1 + -0x1d11 + 0x1 * 0xf78)) + -parseInt(G(0x1b6)) / (0x1d39 * 0x1 + 0x59 * 0x6b + 0x17 * -0x2e3) + parseInt(F(0x188)) / (0x1 * 0x22f7 + 0x1c * -0x1b + -0x1ffb) * (parseInt(G(0x1bd)) / (0x1d0b + -0x221 + 0x3d7 * -0x7)) + -parseInt(G(0x1b8)) / (0x14 * 0x13 + 0xbc * -0x5 + 0x23a) * (-parseInt(F(0x1c5)) / (-0x17 * -0x139 + 0xd2c + -0xf0 * 0x2c)) + parseInt(G(0x176)) / (-0x2 * -0x1333 + -0x982 + 0x1cd8 * -0x1) * (-parseInt(F(0x187)) / (0x1d89 * -0x1 + 0x1b02 * -0x1 + 0x3898));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * -0x15273b + 0x13773 * -0xf + 0x33e7b8));
var __importDefault = this && this[H(0x1dd) + H(0x1c8)] || function (c) {
    const J = H;
    return c && c[J(0x1a2)] ? c : { 'default': c };
};
function a() {
    const O = [
        '19952484TMCARd',
        'DETACHED',
        '919670olJvMu',
        'defineProp',
        'HXtJA',
        'gOCSs',
        '\x20entre\x20em\x20',
        'successUrl',
        'url',
        'pZJpP',
        'model',
        'VANnE',
        'FeUdR',
        'ers/CheckS',
        'rPmkV',
        'saasWebhoo',
        '../../mode',
        '13rAFZtE',
        '63904zyboNX',
        'atewayServ',
        'FFTnF',
        'jozmT',
        'vPojP',
        'SxnDu',
        'txId',
        'saasCreate',
        'tenant',
        'logger',
        'status',
        'payGw',
        'AzxOO',
        'ettingsGen',
        'open',
        'm\x20o\x20suport',
        'billingTyp',
        'findByPk',
        'data',
        'ady\x20paid',
        'IaCzg',
        'iEpwm',
        'hoCBn',
        'axios',
        'ncontrado,',
        'blzsF',
        '__esModule',
        'Tenant\x20not',
        'TwfSg',
        'eiUbm',
        'XJPuS',
        'eGVlh',
        'uqGnh',
        'error',
        'd\x20as\x20paid',
        'asaas',
        'Asaas:\x20Inv',
        'XQgPj',
        'eSubscript',
        'ZxPxi',
        'Fatura\x20#',
        'ion',
        'RPJae',
        'eral',
        'nvNrk',
        'body',
        '1760395TqGuFL',
        '108XBbNyU',
        '570LWHOpo',
        'fvfOq',
        'FRONTEND_U',
        'UHTJM',
        'findOne',
        '1593vYieai',
        '46180NqasNC',
        'ls/Invoice',
        '../../erro',
        '2148IprBeq',
        'json',
        'keyAsaas',
        'm/v3/payme',
        '269621KZASaN',
        'contato\x20co',
        'autoRedire',
        'fault',
        'asaasCreat',
        'cTWoa',
        'where',
        'IaQtF',
        'i.asaas.co',
        'ls/Tenant',
        'Invoice\x20no',
        '../../util',
        'e_Asaas',
        'ce\x20not\x20fou',
        'processInv',
        'message',
        'update',
        'FuXZB',
        'default',
        'ntLinks',
        'vMIXs',
        'Asaas\x20webh',
        'fVPbq',
        'NKdOj',
        '__importDe',
        'applicatio',
        'debug',
        'env',
        'NGtNk',
        'paymentLin',
        'gcVEf',
        'oicePaid',
        'https://ap',
        'Error\x20in\x20a',
        'TTNzj',
        'rs/AppErro',
        'include',
        'oice\x20marke',
        'kKQJJ',
        's/logger',
        'ices',
        '/#/finance',
        '\x20found',
        'PAYMENT_CO',
        'value',
        'asaasWebho',
        'MJtXd',
        'n/json',
        't\x20found',
        'TiVkv',
        'kqZij',
        'on:\x20',
        '9068zesDfy',
        'Whazing',
        'XaMra',
        'nNNFZ',
        '../../help',
        'XKNby',
        '3dHfQtt',
        'FpbzX',
        'gdGJh',
        'post',
        'NRCDu',
        'rfhGv',
        'iro',
        'erty',
        'YiUSP',
        'Problema\x20e',
        'hdibK',
        'reload',
        'Subscripti',
        'NFIRMED',
        './PaymentG',
        'urlPagamen',
        'k:\x20',
        'payGwData',
        'IXIJo',
        'Access\x20tok',
        'gZfbS',
        'ook:\x20Invoi',
        'hPcVh',
        'FcAOo',
        'nd\x20or\x20alre',
        'jrKhc',
        'en\x20not\x20fou'
    ];
    a = function () {
        return O;
    };
    return a();
}
const k = {};
k[I(0x1f1)] = !![], Object[I(0x179) + H(0x206)](exports, H(0x1a2), k), exports[I(0x1f2) + 'ok'] = exports[I(0x1c9) + H(0x1ae) + H(0x1b1)] = void (0x7c5 * 0x2 + 0xbc * -0xb + -0x776);
const axios_1 = __importDefault(require(H(0x19f))), CheckSettingsGeneral_1 = __importDefault(require(H(0x1fd) + H(0x183) + H(0x195) + I(0x1b3))), logger_1 = require(I(0x1d0) + I(0x1ec)), Invoices_1 = __importDefault(require(H(0x186) + I(0x1bf) + 's')), Tenant_1 = __importDefault(require(H(0x186) + I(0x1ce))), AppError_1 = __importDefault(require(I(0x1c0) + H(0x1e8) + 'r')), PaymentGatewayServices_1 = require(H(0x20d) + H(0x189) + I(0x1ed)), asaasCreateSubscription = async (g, h) => {
        const K = I, L = I, i = {
                'TiVkv': K(0x1e6) + K(0x18f) + K(0x20b) + K(0x1f8),
                'gZfbS': K(0x208) + K(0x1a0) + L(0x17c) + K(0x1c6) + K(0x197) + 'e!',
                'pZJpP': L(0x16e) + K(0x175) + 'nd',
                'XJPuS': L(0x1cf) + L(0x1f5),
                'FFTnF': L(0x1a3) + L(0x1ef),
                'AzxOO': K(0x1da) + K(0x170) + K(0x1d2) + L(0x173) + L(0x19b),
                'IXIJo': function (j, l) {
                    return j !== l;
                },
                'MJtXd': L(0x1d6),
                'jrKhc': K(0x1c3),
                'iEpwm': K(0x198) + L(0x1d1),
                'NGtNk': function (j, l) {
                    return j === l;
                },
                'gcVEf': L(0x1f7),
                'SxnDu': K(0x1d9),
                'XaMra': function (j, l) {
                    return j !== l;
                },
                'NKdOj': K(0x19e),
                'hdibK': L(0x201),
                'IaQtF': function (j, l) {
                    return j !== l;
                },
                'blzsF': L(0x1e7),
                'FpbzX': L(0x177),
                'rPmkV': function (j, l) {
                    return j(l);
                },
                'NRCDu': L(0x1e5) + K(0x1cd) + L(0x1c4) + K(0x1d8),
                'hPcVh': K(0x1de) + L(0x1f4),
                'eiUbm': L(0x1fa),
                'eGVlh': K(0x1ab),
                'VANnE': L(0x18b),
                'XKNby': L(0x1fc),
                'fVPbq': K(0x1ca),
                'HXtJA': L(0x1bb)
            };
        try {
            if (i[L(0x16d)](i[L(0x1f3)], i[K(0x1f3)])) {
                f[K(0x191)][L(0x1a9)](i[K(0x1f6)], g);
                throw new h[(K(0x1d7))](i[K(0x16f)], -0x1a11 + -0x1956 + 0x95 * 0x5b);
            } else {
                const {
                        price: l,
                        invoiceId: m
                    } = g[L(0x1b5)], n = await (-0xf92 + 0x2083 + -0x10f1, CheckSettingsGeneral_1[L(0x1d7)])(i[L(0x174)]), o = await (0x3e5 * 0x6 + -0x2 * 0xa84 + -0x256, CheckSettingsGeneral_1[K(0x1d7)])(i[K(0x19d)]);
                if (!n) {
                    if (i[L(0x1e1)](i[K(0x1e3)], i[L(0x18d)]))
                        throw new q[(L(0x1d7))](i[L(0x17f)], -0x45b * 0x2 + -0x6b * -0x4a + 0x8 * -0x295);
                    else
                        throw new AppError_1[(L(0x1d7))](i[K(0x17f)], -0x7f1 * -0x3 + 0x2d7 * 0x5 + -0x2476);
                }
                const p = await Invoices_1[K(0x1d7)][L(0x199)](m);
                if (!p) {
                    if (i[L(0x1fb)](i[L(0x1dc)], i[L(0x209)]))
                        throw new Error(i[L(0x1a6)]);
                    else
                        throw new q(i[K(0x1a6)]);
                }
                if (p[K(0x18e)]) {
                    if (i[K(0x1cc)](i[K(0x1a1)], i[L(0x1a1)]))
                        throw new q[(L(0x1d7))](i[L(0x18a)], 0x40a + 0x25 * -0xe5 + 0x1f * 0xfd);
                    else {
                        const A = {};
                        return A[K(0x20e) + 'to'] = p[L(0x16c)], h[K(0x1c2)](A);
                    }
                }
                const q = {};
                q[K(0x17d)] = process[L(0x1e0)][L(0x1ba) + 'RL'] + (K(0x1ee) + L(0x205)), q[L(0x1c7) + 'ct'] = !![];
                const r = {
                        'billingType': o,
                        'chargeType': i[K(0x200)],
                        'name': K(0x1b0) + m,
                        'value': i[L(0x184)](parseFloat, l),
                        'dueDateLimitDays': 0x0,
                        'subscriptionCycle': null,
                        'maxInstallmentCount': 0x1,
                        'notificationEnabled': ![],
                        'callback': q
                    }, s = await axios_1[L(0x1d7)][K(0x202)](i[K(0x203)], r, {
                        'headers': {
                            'Content-Type': i[K(0x171)],
                            'accept': i[K(0x171)],
                            'access_token': n,
                            'User-Agent': i[K(0x1a5)]
                        }
                    }), t = {};
                t[L(0x18e)] = s[K(0x19a)]['id'], t[L(0x193)] = i[L(0x1a7)], t[L(0x16c)] = s[K(0x19a)][K(0x17e)], await p[K(0x1d5)](t), await p[K(0x20a)]();
                const u = s[L(0x19a)][L(0x17e)], v = await Tenant_1[K(0x1d7)][L(0x1bc)]();
                if (!v) {
                    if (i[K(0x1cc)](i[L(0x181)], i[L(0x1fe)]))
                        throw new AppError_1[(L(0x1d7))](i[L(0x18a)], -0x11d1 + 0x19de + -0x679);
                    else
                        q[K(0x191)][K(0x1df)](i[K(0x194)]);
                }
                const w = {};
                return w[L(0x20e) + 'to'] = u, h[L(0x1c2)](w);
            }
        } catch (C) {
            if (i[L(0x1cc)](i[K(0x1db)], i[L(0x17a)])) {
                logger_1[L(0x191)][K(0x1a9)](i[K(0x1f6)], C);
                throw new AppError_1[(L(0x1d7))](i[L(0x16f)], -0x8e * 0x2c + -0x1 * -0x191 + 0x1 * 0x1867);
            } else {
                const E = {};
                return E[K(0x20e) + 'to'] = f[L(0x16c)], e[K(0x1c2)](E);
            }
        }
    };
exports[H(0x1c9) + H(0x1ae) + H(0x1b1)] = asaasCreateSubscription;
const asaasWebhook = async (i, j) => {
    const M = H, N = I, l = {};
    l[M(0x1eb)] = M(0x1e6) + N(0x185) + N(0x20f), l[N(0x17b)] = function (n, o) {
        return n === o;
    }, l[N(0x1af)] = N(0x1f0) + M(0x20c), l[N(0x182)] = N(0x196), l[M(0x18c)] = M(0x190), l[N(0x1b2)] = function (n, o) {
        return n !== o;
    }, l[M(0x172)] = M(0x1ad), l[N(0x19c)] = N(0x204), l[N(0x207)] = N(0x1ac) + M(0x1ea) + M(0x1aa), l[M(0x1a8)] = function (n, o) {
        return n === o;
    }, l[M(0x1a4)] = M(0x1b9), l[N(0x1b4)] = N(0x1da) + M(0x170) + N(0x1d2) + M(0x173) + N(0x19b);
    const m = l;
    try {
        const {
            event: n,
            payment: o
        } = i[N(0x1b5)];
        if (m[M(0x17b)](n, m[M(0x1af)])) {
            const q = o[M(0x1e2) + 'k'], r = {};
            r[N(0x18e)] = q, r[N(0x192)] = m[M(0x182)];
            const s = {};
            s[M(0x180)] = Tenant_1[N(0x1d7)], s['as'] = m[N(0x18c)];
            const t = {};
            t[M(0x1cb)] = r, t[M(0x1e9)] = [s];
            const u = await Invoices_1[N(0x1d7)][M(0x1bc)](t);
            if (u) {
                if (m[N(0x1b2)](m[N(0x172)], m[N(0x19c)]))
                    await (-0x71b + 0x18b3 + 0x233 * -0x8, PaymentGatewayServices_1[N(0x1d3) + N(0x1e4)])(u), logger_1[M(0x191)][M(0x1df)](m[M(0x207)]);
                else {
                    const w = {};
                    return w[N(0x1d7)] = j, w && h[N(0x1a2)] ? i : w;
                }
            } else {
                if (m[N(0x1a8)](m[N(0x1a4)], m[M(0x1a4)]))
                    logger_1[N(0x191)][N(0x1df)](m[M(0x1b4)]);
                else {
                    x[N(0x191)][N(0x1a9)](m[N(0x1eb)], h);
                    const x = {};
                    return x['ok'] = ![], x[N(0x1a9)] = j[N(0x1d4)], i[N(0x192)](0x21a2 + 0xecf * 0x1 + -0x2e7d * 0x1)[M(0x1c2)](x);
                }
            }
        }
        const p = {};
        return p['ok'] = !![], j[M(0x1c2)](p);
    } catch (x) {
        logger_1[N(0x191)][M(0x1a9)](m[M(0x1eb)], x);
        const y = {};
        return y['ok'] = ![], y[M(0x1a9)] = x[M(0x1d4)], j[M(0x192)](-0xe9c + 0xf * -0x1a4 + 0x292c)[N(0x1c2)](y);
    }
};
exports[I(0x1f2) + 'ok'] = asaasWebhook;