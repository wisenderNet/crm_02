'use strict';
const L = b, M = b;
function a() {
    const a2 = [
        '08:00',
        'oqwMQ',
        'YiKFS',
        'campaginId',
        'to_Domingo',
        'sSlVG',
        'split',
        'value',
        'S_NOT_EXIS',
        'kEiea',
        '2555440zXVyQx',
        'getHours',
        'XISTS',
        'JZcIq',
        'zonedTimeT',
        'parse',
        'InSeconds',
        'QbaPF',
        'eWhatsappC',
        'OYjDG',
        'update',
        'Nivju',
        'RXnib',
        'length',
        '/Queue',
        '880940Mcktfv',
        'FJXge',
        'getTime',
        'yMrkG',
        '517508iAleuT',
        'VlLmW',
        'OpriR',
        'findOne',
        'picdw',
        '9urDoFN',
        'RFBDw',
        '5454337NIyNnN',
        '../../mode',
        'ltWYy',
        '../../libs',
        'isWithinIn',
        'America/San',
        'MfUKO',
        'ERROR_CAMP',
        'message2',
        'pfRJy',
        'ampaign',
        'FJfia',
        'terval',
        'gKdxX',
        'aQbsX',
        'mediaUrl',
        'status',
        'sGLwg',
        'rs/AppErro',
        'LVxcf',
        'YAGxj',
        'qaIkD',
        'add',
        'GCewu',
        'VXgQV',
        'YQHBo',
        'UaErE',
        'defineProp',
        'end',
        'map',
        'addDays',
        'message3',
        'setHours',
        'CCbsV',
        'oUtc',
        'delay',
        'pOSdM',
        '352826rxPXlh',
        'eZVzI',
        'isBefore',
        'addSeconds',
        'dqeQD',
        'ERR_CAMPAI',
        'HH:mm',
        '20:00',
        'lRUvm',
        'where',
        'aaUId',
        'phoneNumbe',
        'pupa',
        'scheduled',
        'dKLYU',
        'contactId',
        'VydbD',
        '7910RkfDyr',
        'myFYf',
        'upkJX',
        'isAfter',
        'include',
        'message',
        'GN_CONTACT',
        'fault',
        'ZWjrv',
        'kyXcT',
        'name',
        'gavjK',
        'Whsav',
        'PXbQu',
        'lONqo',
        'findAll',
        'TwIWR',
        'fTXwl',
        'SendMessag',
        'date-fns',
        '5fikvXn',
        'AQoIT',
        'SQiso',
        'FUeIF',
        'EMBSK',
        'session',
        'campaignId',
        'message1',
        'sacfH',
        'sqOjn',
        'difference',
        'qElCb',
        'tplgJ',
        'nContacts',
        'setMinutes',
        'start',
        '../../util',
        'ls/Campaig',
        'email',
        'fZsXn',
        '15DEZMDt',
        'ThbZw',
        'hmEGZ',
        'getMinutes',
        '6340710iBvANH',
        'skAmp',
        '__importDe',
        '43076YbibSG',
        '_id_',
        's/pupa',
        'QUUuf',
        'Bgmtw',
        'baZrT',
        'number',
        '_contact_',
        'sessionId',
        'contact',
        'aGQkV',
        'Jcjgl',
        'erty',
        'tenantId',
        'date-fns-t',
        'InDays',
        'fADqE',
        'AIGN_NOT_E',
        'wHbUp',
        '../../erro',
        'xCBUe',
        'floor',
        'Gvtas',
        'qvaaA',
        'default',
        'zRklE',
        'HeKZB',
        '__esModule',
        'random',
        'nzNMg',
        'DvBRh'
    ];
    a = function () {
        return a2;
    };
    return a();
}
(function (c, d) {
    const J = b, K = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(J(0x115)) / (-0xb39 + -0x1ce1 + 0x1 * 0x281b) + -parseInt(J(0xe9)) / (-0x1 * 0x5f7 + -0x7f5 + 0xdee) + parseInt(K(0xa6)) / (0x1840 + -0xc2d + -0x4 * 0x304) * (-parseInt(J(0xe5)) / (0x1 * 0x195b + -0x75a + -0x11fd)) + -parseInt(K(0x92)) / (-0xa38 + -0x1cb2 + -0x1 * -0x26ef) * (parseInt(K(0xaa)) / (0x2 * -0x12f8 + -0x1 * -0xf5f + 0x1697)) + -parseInt(J(0xf0)) / (0x1e41 + 0x3a * -0x97 + -0x11 * -0x3c) + -parseInt(K(0xd6)) / (-0xc * -0x1e3 + 0xc6 * -0x3 + -0x6a * 0x31) * (-parseInt(J(0xee)) / (-0x28d * -0x6 + 0x269 * -0x4 + -0x5a1)) + -parseInt(J(0x7e)) / (-0xb * 0x28f + -0x1e87 + 0x3ab6) * (-parseInt(K(0xad)) / (0x22f3 + -0x28d * -0xf + -0x492b));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xc1821 + 0x1 * -0xcc4d5 + 0x1 * 0x96e87));
var __importDefault = this && this[L(0xac) + L(0x85)] || function (c) {
    const N = L;
    return c && c[N(0xc8)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x55a + 0x227a + 0x1caf * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const I = {};
I[M(0xd3)] = !![], Object[M(0x10b) + M(0xb9)](exports, M(0xc8), I);
const pupa_1 = require(M(0xa2) + L(0xaf)), date_fns_1 = require(L(0x91)), date_fns_tz_1 = require(M(0xbb) + 'z'), Campaign_1 = __importDefault(require(L(0xf1) + L(0xa3) + 'n')), AppError_1 = __importDefault(require(L(0xc0) + L(0x102) + 'r')), CampaignContacts_1 = __importDefault(require(L(0xf1) + L(0xa3) + M(0x9f))), Queue_1 = __importDefault(require(M(0xf3) + M(0xe4))), cArquivoName = d => {
        const O = L, P = L, e = {};
        e[O(0xc1)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[O(0xd2)]('/'), h = g[f[O(0xc1)](g[P(0xe3)], -0x2 * 0x2ae + 0x1a3 * -0x11 + 0x2130)];
        return h;
    }, randomInteger = (d, e) => {
        const Q = M, R = L, f = {};
        f[Q(0xb7)] = function (h, i) {
            return h + i;
        }, f[Q(0xb8)] = function (h, i) {
            return h * i;
        }, f[R(0x101)] = function (h, i) {
            return h + i;
        }, f[R(0x86)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[R(0xb7)](Math[R(0xc2)](g[R(0xb8)](Math[R(0xc9)](), g[Q(0x101)](g[R(0x86)](e, d), 0x65 * -0x61 + -0x4a + -0x1 * -0x2690))), d);
    }, mountMessageData = (d, e, f) => {
        const S = L, T = M, g = {
                'SQiso': function (k, l, m) {
                    return k(l, m);
                },
                'baZrT': function (k, l) {
                    return k === l;
                },
                'dqeQD': function (k, l) {
                    return k === l;
                },
                'Gvtas': function (k, l) {
                    return k || l;
                },
                'myFYf': function (k, l) {
                    return k(l);
                }
            }, h = g[S(0x94)](randomInteger, -0x51b * 0x7 + -0x779 * -0x3 + 0x471 * 0x3, 0x1ef9 + -0x3da + -0x1b1c);
        let i = '';
        if (g[S(0xb2)](h, -0x1 * -0x1b9b + -0x21c1 + 0x627))
            i = d[S(0x99)];
        if (g[S(0x71)](h, 0x2656 + 0xa * 0x2c7 + -0x421a))
            i = d[S(0xf8)];
        if (g[S(0xb2)](h, -0xe4c + -0x63 * -0x49 + -0xdec))
            i = d[T(0x10f)];
        const j = {};
        return j[S(0x88)] = e[S(0xb6)][T(0x88)] || '', j[T(0xa4)] = e[S(0xb6)][T(0xa4)] || '', j[T(0x78) + 'r'] = e[T(0xb6)][S(0xb3)] || '', i = (-0x6be * -0x5 + 0x11 * -0x16a + -0x9ac, pupa_1[S(0x79)])(g[T(0xc3)](i, ''), j), {
            'whatsappId': d[S(0xb5)],
            'message': i,
            'number': e[S(0xb6)][S(0xb3)],
            'mediaUrl': d[S(0xff)],
            'mediaName': g[T(0x7f)](cArquivoName, d[S(0xff)]),
            'messageRandom': S(0x83) + h,
            'campaignContact': e,
            'options': f
        };
    }, nextDayHoursValid = d => {
        const U = L, V = L, e = {
                'sqOjn': function (o, p, q) {
                    return o(p, q);
                },
                'DvBRh': function (o, p) {
                    return o === p;
                },
                'qElCb': function (o, p) {
                    return o || p;
                },
                'qvaaA': function (o, p) {
                    return o(p);
                },
                'wHbUp': function (o, p) {
                    return o * p;
                },
                'pOSdM': function (o, p) {
                    return o / p;
                },
                'eZVzI': function (o, p, q, r) {
                    return o(p, q, r);
                },
                'QbaPF': U(0x72) + U(0x84) + V(0xd4) + 'TS',
                'YQHBo': function (o, p) {
                    return o < p;
                },
                'picdw': function (o, p) {
                    return o !== p;
                },
                'tplgJ': U(0x10a),
                'skAmp': V(0xf9),
                'OYjDG': function (o, p) {
                    return o * p;
                },
                'oqwMQ': function (o, p) {
                    return o < p;
                },
                'fADqE': U(0x9a),
                'RFBDw': V(0xcc),
                'ltWYy': V(0x73),
                'lONqo': U(0x74),
                'upkJX': function (o, p) {
                    return o && p;
                },
                'fZsXn': function (o, p) {
                    return o === p;
                },
                'lRUvm': V(0xf6),
                'LVxcf': function (o, p) {
                    return o && p;
                },
                'zRklE': function (o, p) {
                    return o !== p;
                },
                'AQoIT': V(0xd1),
                'kEiea': V(0x8f),
                'FJXge': function (o, p) {
                    return o > p;
                },
                'aaUId': U(0x7b),
                'nzNMg': V(0xea)
            };
        let f = d;
        const g = new Date(), h = (-0x3 * 0x6 + 0x1c8 * 0x3 + -0x546, date_fns_1[V(0x9c) + U(0xbc)])(f, new Date());
        e[U(0x109)](h, 0x249d + -0xbae + 0xd * -0x1eb) && (e[U(0xed)](e[U(0x9e)], e[V(0xab)]) ? f = (-0x150e + 0x25c + 0x12b2 * 0x1, date_fns_1[V(0x10e)])(f, e[U(0xdf)](h, -(-0x21f + -0x2598 + 0x27b8))) : g = (-0xdd * -0xe + 0xdfa + -0x342 * 0x8, h[U(0xa0)])((0x484 * -0x2 + -0xc9e + -0x1 * -0x15a6, i[V(0x110)])(j, -0x265 * 0xb + -0x1 * -0x960 + 0x10ff), -0x143c + -0x1 * -0x1e9d + -0xa43 * 0x1));
        if (e[U(0xcd)](f[U(0xe7)](), g[V(0xe7)]())) {
            if (e[U(0xed)](e[U(0xbd)], e[U(0xbd)])) {
                const q = e[V(0x9b)](r, -0x592 + 0x2192 + -0x1bff, -0x4a + -0x2a0 + -0x1 * -0x2ed);
                let r = '';
                if (e[V(0xcb)](q, 0x1969 + -0x1290 + -0x6d8))
                    r = s[V(0x99)];
                if (e[V(0xcb)](q, -0x2c2 * -0x4 + 0x24c2 * -0x1 + 0x19bc))
                    r = t[V(0xf8)];
                if (e[V(0xcb)](q, 0x38a + 0xb34 + -0xebb))
                    r = u[V(0x10f)];
                const s = {};
                return s[U(0x88)] = w[V(0xb6)][V(0x88)] || '', s[V(0xa4)] = x[U(0xb6)][U(0xa4)] || '', s[U(0x78) + 'r'] = y[U(0xb6)][U(0xb3)] || '', r = (-0x13 * -0x2b + -0x1 * -0x2516 + 0x5c1 * -0x7, v[V(0x79)])(e[V(0x9d)](r, ''), s), {
                    'whatsappId': z[U(0xb5)],
                    'message': r,
                    'number': A[V(0xb6)][U(0xb3)],
                    'mediaUrl': B[V(0xff)],
                    'mediaName': e[V(0xc4)](C, D[V(0xff)]),
                    'messageRandom': V(0x83) + q,
                    'campaignContact': E,
                    'options': F
                };
            } else
                f = (0x18e + 0x1 * -0x22 + 0x1c * -0xd, date_fns_1[V(0xa0)])((-0x35 * 0x65 + 0xf4 * -0x1 + 0x15dd, date_fns_1[U(0x110)])(f, g[U(0xd7)]()), g[U(0xa9)]());
        }
        const i = (-0x21dd + -0x2017 + 0x41f4, date_fns_1[V(0xdb)])(e[V(0xef)], e[U(0xf2)], f), j = (0x1c2b + 0x25ee + -0x4219, date_fns_1[U(0xdb)])(e[U(0x8c)], e[V(0xf2)], f), k = {};
        k[V(0xa1)] = i, k[U(0x10c)] = j;
        const l = (-0x1 * 0x247 + -0x2089 + 0x22d0, date_fns_1[U(0xf4) + V(0xfc)])(f, k), m = (0xf34 + -0x2 * -0x104e + 0x66 * -0x78, date_fns_1[V(0x117)])(i, f), n = (-0x9 * -0x394 + -0x88f + -0x17a5 * 0x1, date_fns_1[V(0x81)])(j, f);
        e[V(0x80)](!l, m) && (e[V(0xa5)](e[V(0x75)], e[V(0x75)]) ? f = (-0x1232 + 0x1 * 0x90f + 0x923 * 0x1, date_fns_1[U(0xa0)])((0x329 * 0x7 + -0x1622 + 0x1 * 0x3, date_fns_1[U(0x110)])(f, 0x503 + -0x1c * 0x116 + 0x196d), -0x1 * 0x1169 + -0x1db2 + 0xb * 0x44b) : g = (0x5 * 0x6b5 + -0x1821 + 0x2b * -0x38, h[V(0x10e)])(i, e[V(0xbf)](j, -(0x19f9 + -0x3d7 * -0x2 + -0x21a6 * 0x1))));
        if (e[U(0x103)](!l, n) && e[V(0xa5)](h, -0xa39 + -0x15d * -0x1 + 0x8dc)) {
            if (e[U(0xc6)](e[U(0x93)], e[U(0xd5)]))
                f = (0x3e9 + -0x1 * -0x59 + -0xda * 0x5, date_fns_1[V(0x10e)])((-0x24a * 0x1 + 0x2d4 + -0x1 * 0x8a, date_fns_1[U(0x110)])(f, 0x74b + 0x8ce + 0x55b * -0x3), -0x853 * 0x3 + -0x24b5 + 0x1 * 0x3daf);
            else
                return q = (-0x1 * -0xfb5 + -0x21 * -0x125 + 0x5 * -0xab2, r[V(0x118)])(s, e[U(0x114)](t, -0x2 * -0x417 + -0x167 * 0x1 + 0x69 * -0x7)), e[U(0x116)](u, v, w, {
                    ...x,
                    'jobId': U(0xcf) + '_' + y['id'] + V(0xb4) + z[V(0x7c)] + U(0xae) + A['id'],
                    'delay': e[U(0x9b)](B, C, D)
                });
        }
        if (e[U(0x80)](!l, n) && e[V(0xe6)](h, -0x11a3 + -0x3bb * 0x1 + 0x155e)) {
            if (e[U(0xc6)](e[V(0x77)], e[V(0xca)]))
                f = (0x1c1b + 0x1eef * 0x1 + -0x1ca * 0x21, date_fns_1[V(0x110)])(f, -0x44 * 0x2d + -0x2c * -0x8b + -0xbe8);
            else
                throw new d[(U(0xc5))](e[V(0xdd)], 0x29 * 0x1f + -0x2 * 0xc9b + -0x25 * -0x97);
        }
        return f;
    }, calcDelay = (d, e) => {
        const W = M, X = M, f = {};
        f[W(0x111)] = function (i, j) {
            return i + j;
        }, f[W(0xa8)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (-0x1 * -0x1caf + 0x228c + -0x3f3b, date_fns_1[X(0x9c) + X(0xdc)])(d, new Date());
        return g[W(0x111)](g[X(0xa8)](h, -0x1 * -0x190f + -0x1a10 + 0x1a3 * 0x3), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const Y = M, Z = L, k = {
                'TwIWR': function (v, w) {
                    return v - w;
                },
                'QUUuf': Y(0xf7) + Z(0xbe) + Z(0xd8),
                'Bgmtw': function (v, w) {
                    return v === w;
                },
                'PXbQu': Z(0x105),
                'RXnib': Z(0x107),
                'gKdxX': function (v, w) {
                    return v / w;
                },
                'FJfia': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'aQbsX': function (v, w, x) {
                    return v(w, x);
                },
                'kyXcT': Y(0x97),
                'JZcIq': Y(0x96),
                'Nivju': Y(0xb6),
                'VydbD': function (v, w) {
                    return v !== w;
                },
                'ThbZw': Z(0x89),
                'FUeIF': Z(0xeb),
                'Whsav': Y(0x72) + Y(0x84) + Y(0xd4) + 'TS',
                'YiKFS': function (v, w) {
                    return v * w;
                },
                'YAGxj': Z(0xf5) + Y(0xd0),
                'yMrkG': Z(0x90) + Z(0xde) + Z(0xfa),
                'HeKZB': Y(0x7a)
            }, l = {};
        l['id'] = h, l[Z(0xba)] = i;
        const m = {};
        m[Y(0x76)] = l, m[Z(0x82)] = [k[Z(0x87)]];
        const n = await Campaign_1[Z(0xc5)][Y(0xec)](m);
        if (!n) {
            if (k[Y(0xb1)](k[Z(0xd9)], k[Z(0xd9)]))
                throw new AppError_1[(Y(0xc5))](k[Y(0xb0)], 0x1bbe + 0x3ff + -0x1e29);
            else {
                if (!o)
                    return '';
                const w = p[Z(0xd2)]('/'), x = w[k[Y(0x8e)](w[Y(0xe3)], 0x514 + 0x102a * -0x1 + -0xb17 * -0x1)];
                return x;
            }
        }
        const o = {};
        o[Z(0x98)] = h;
        const p = {};
        p[Y(0x76)] = o, p[Y(0x82)] = [k[Z(0xe1)]];
        const q = await CampaignContacts_1[Y(0xc5)][Z(0x8d)](p);
        if (!q) {
            if (k[Z(0x7d)](k[Z(0xa7)], k[Y(0x95)]))
                throw new AppError_1[(Y(0xc5))](k[Y(0x8a)], -0x1 * 0x997 + 0x4d1 + -0x65a * -0x1);
            else {
                const x = {};
                return x[Z(0xc5)] = j, x && h[Y(0xc8)] ? i : x;
            }
        }
        const r = n[Y(0x113)] ? k[Z(0xce)](n[Y(0x113)], 0x2488 + 0x25ed + -0x468d) : 0x7a89 + 0x737 * 0x10 + -0x9fd9 * 0x1;
        let s = (0x6 * 0x8c + 0x95 * 0x29 + -0x1 * 0x1b25, date_fns_tz_1[Z(0xda) + Y(0x112)])(n[Y(0xa1)], k[Y(0x104)]);
        const t = q[Z(0x10d)](x => {
            const a0 = Z, a1 = Z, y = {};
            y[a0(0x108)] = k[a0(0xb0)];
            const z = y;
            if (k[a0(0xb1)](k[a0(0x8b)], k[a1(0xe2)]))
                throw new m[(a1(0xc5))](z[a0(0x108)], -0x1fee + 0x3f * -0x66 + -0xea7 * -0x4);
            else
                return s = (-0x715 + 0x69f * 0x5 + 0x1 * -0x1a06, date_fns_1[a1(0x118)])(s, k[a1(0xfd)](r, 0xb54 + -0x23d1 + 0x1 * 0x1c65)), k[a1(0xfb)](mountMessageData, n, x, {
                    ...j,
                    'jobId': a1(0xcf) + '_' + n['id'] + a1(0xb4) + x[a0(0x7c)] + a1(0xae) + x['id'],
                    'delay': k[a0(0xfe)](calcDelay, s, r)
                });
        });
        Queue_1[Z(0xc5)][Z(0x106)](k[Y(0xe8)], t);
        const u = {};
        u[Z(0x100)] = k[Y(0xc7)], await n[Y(0xe0)](u);
    };
exports[L(0xc5)] = StartCampaignService;